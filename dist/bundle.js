!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=26)}([function(e,t,n){"use strict";var r={};n.r(r),n.d(r,"toRgba",function(){return s}),n.d(r,"toRgbaString",function(){return l}),n.d(r,"hue",function(){return c}),n.d(r,"saturation",function(){return u}),n.d(r,"contrast",function(){return d}),n.d(r,"tint",function(){return h}),n.d(r,"transform",function(){return p}),n.d(r,"invert",function(){return f});var i={};n.r(i),n.d(i,"toRadians",function(){return g}),n.d(i,"toDegrees",function(){return v}),n.d(i,"random",function(){return b}),n.d(i,"randomBoolean",function(){return y}),n.d(i,"randomWeightedKey",function(){return w}),n.d(i,"rel",function(){return x}),n.d(i,"inRange",function(){return E}),n.d(i,"isNumber",function(){return C}),n.d(i,"toNumber",function(){return A}),n.d(i,"restrict",function(){return S}),n.d(i,"getAnglePoint",function(){return k}),n.d(i,"getAngle",function(){return T}),n.d(i,"getDistance",function(){return P});var o={};n.r(o),n.d(o,"clone",function(){return D}),n.d(o,"defaults",function(){return M}),n.d(o,"objectifier",function(){return O});var a=new function(){this.gpsSuccessCallback,this.gpsFailCallback,this.getGPSData=function(e,t){navigator.geolocation?(a.gpsSuccessCallback=e,a.gpsFailCallback=t,navigator.geolocation.getCurrentPosition(a.onLocationRetrieved,a.onLocationFailed)):console.log("geolocation not available")},this.onLocationRetrieved=function(e){a.gpsSuccessCallback(e.coords)},this.onLocationFailed=function(e){switch(console.log("Error retrieving location data"),e.code){case 0:console.log("0 - unknown error");break;case 1:console.log("1 - permission denied");break;case 2:console.log("2 - position unavailable (error response from locaton");break;case 3:console.log("3 - timed out")}a.gpsFailCallback&&a.gpsFailCallback(e)}};!function(){var e,t,n,r,i,o=0,a=0,s=0,l=0,c=!0,u=1;function d(d){switch(window.orientation){case-90:a=d.gamma,o=-d.beta;break;case 90:a=-d.gamma,o=d.beta;break;case 180:a=-d.beta,o=-d.gamma;break;default:a=d.beta,o=d.gamma}c&&(s=o,l=a,c=!1),o-=s,a-=l,o*=u,a*=u,e&&o<e&&(o=e),t&&o>t&&(o=t),n&&a<n&&(a=n),r&&a>r&&(a=r),i(o,a)}}();function s(e,t){switch(typeof e){case"object":e=e||{r:0,g:0,b:0,a:1};break;default:if(e.indexOf("rgb")>=0)e=e.substring(e.indexOf("(")+1,e.lastIndexOf(")")).split(/,\s*/),e={r:parseInt(e[0]),g:parseInt(e[1]),b:parseInt(e[2]),a:Number(e[3])};else{if(!(e.indexOf("#")>=0))return console.log(""),console.log("ERROR: ColorUtils.toRgba does not accept color names such as '"+e+"'. Use HEX or an RGB/A string or object per documentation"),console.log("Returning the color '"+e+"' without any alpha"),console.log(""),e;var n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})?$/i.exec(e);e=n?{r:parseInt(n[1],16),g:parseInt(n[2],16),b:parseInt(n[3],16),a:n[4]?Number(n[4],16):1}:null}}return e.a||(e.a=1),t>=0&&(e.a=t),e}function l(e,t){return"rgba("+(e=s(e,t)).r+","+e.g+","+e.b+","+e.a+")"}function c(e){var t=function(e){var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.max(t,n,r),o=Math.min(t,n,r),a=i-o,s=(i+o)/2,l=0,c=0;l=0==a?0:i==t?(n-r)/a%6*60:i==n?60*((r-t)/a+2):60*((t-n)/a+4);return c=a?a/(1-Math.abs(2*s-1)):0,{h:l,s:c,l:s}}((e=_(e)).from);t.h=(t.h+e.amount)%360,t.h<0&&(t.h+=360);var n=function(e){var t,n,r,i=e.h/60,o=e.s,a=e.l,s=(1-Math.abs(2*a-1))*o,l=s*(1-Math.abs(i%2-1)),c=a-s/2;switch(i=Math.floor(i)){case 0:t=s,n=l,r=0;break;case 1:t=l,n=s,r=0;break;case 2:t=0,n=s,r=l;break;case 3:t=0,n=l,r=s;break;case 4:t=l,n=0,r=s;break;case 5:t=s,n=0,r=l}return{r:m(t,c),g:m(n,c),b:m(r,c)}}(t);return e.from.a>=0&&(n.a=e.from.a),"object"===e.format?n:l(n)}function u(e){delete e.to,e=_(e);var t={};for(var n in e.from){var r=parseInt(e.from[n]);if("a"===n)t[n]=r;else{if("r"===n){var i=0,o=255;for(var a in e.from)parseInt(e.from[a])>i&&(i=parseInt(e.from[a])),parseInt(e.from[a])<o&&(o=parseInt(e.from[a]))}t[n]=Math.round(r*e.amount+(1-e.amount)*((i+o)/2))}}return"object"===e.format?t:l(t)}function d(e){delete e.to,e=_(e);var t={};for(var n in e.from){var r=parseInt(e.from[n]);t[n]="a"===n?r:Math.round(r*e.amount)}return"object"===e.format?t:l(t)}function h(e){e=_(e);var t={};for(var n in e.from){var r=parseInt(e.from[n]);t[n]="a"===n?r:Math.round(r+(parseInt(e.to[n])-r)*e.amount)}return"object"===e.format?t:l(t)}function p(e){e=_(e);var t={};for(var n in e.from){var r=parseInt(e.from[n]);t[n]="a"===n?r:Math.round(r-(255-parseInt(e.to[n]))*e.amount)}return"object"===e.format?t:l(t)}function f(e){delete e.to,delete e.amount,e=_(e);var t={};for(var n in e.from){var r=parseInt(e.from[n]);t[n]="a"===n?r:255-r}return"object"===e.format?t:l(t)}function _(e){return e.from=e.from||e.color,e.from&&"object"!=typeof e.from&&(e.from=s(e.from)),e.to&&"object"!=typeof e.to&&(e.to=s(e.to)),e.amount=void 0===e.amount?1:e.amount,e}function m(e,t){return(e=Math.floor(255*(e+t)))<0&&(e=0),e}function g(e){return Math.PI/180*e}function v(e){return 180/Math.PI*e}function b(e,t,n){t=t||0,n=void 0!=n&&n>0?n:1;var r=Math.min(e,t),i=Math.max(e,t);return r=Math.ceil(r/n)*n,i=Math.floor(i/n)*n,r+Math.floor(Math.random()*((i-r+n)/n))/(1/n)}function y(e){return e=e||.5,Math.random()<e}function w(e){var t=[],n=[0];for(var r in e)t.push(r),n.push(e[r]+(n[n.length-1]||0));for(var i=100*Math.random().toFixed(2),o=0;o<n.length-1;o++){if(E(i,n[o],n[o+1]))return t[o]}}function x(e,t,n,r,i){return(i-n)/(r-n)*(t-e)+e}function E(e,t,n){var r=Math.min(t,n);return e<=Math.max(t,n)&&e>=r}function C(e){return!isNaN(e)}function A(e){return+e}function S(e,t,n){return Math.max(t,Math.min(n,e))}function k(e,t,n,r){return[e=e+Math.cos(r)*n,t=t+Math.sin(r)*n]}function T(e,t,n,r){return n=n||0,r=r||0,Math.atan2(r-t,n-e)}function P(e,t,n,r){return n=n||0,r=r||0,Math.sqrt((r-t)*(r-t)+(n-e)*(n-e))}var O={};function D(e){if("[object Object]"!==Object.prototype.toString.call(e))return e;var t=e.constructor();for(var n in e)t[n]=D(e[n]);return t}function M(e,t,n){void 0===e&&(e={});var r=D(e);for(var i in t){var o=t[i];void 0===r[i]?r[i]=t[i]:n&&"[object Object]"===Object.prototype.toString.call(o)&&(r[i]=M(r[i],o,n))}return r}O.get=function(e,t){void 0===t&&(t=window);var n=O._getSplits(e).splits;return O._getProperty(n,t)},O.set=function(e,t,n){void 0===n&&(n=window);var r=O._getSplits(e,!0);O._getProperty(r.splits,n)[r.lastKey]=t},O._getSplits=function(e,t){var n=e.split(".");return{splits:n,lastKey:t?n.pop():null}},O._getProperty=function(e,t){void 0===t&&(t={});for(var n,r=t,i=0;r&&(n=e[i]);i++)r=n in r?r[n]:void 0;return r};n(14);n.d(t,"a",function(){return r}),n.d(t,"b",function(){return i}),n.d(t,"c",function(){return o})},function(e,t,n){"use strict";var r=function(){var e=this;e.identity=new Float32Array([1,0,0,0,1,0]),e.data=new Float32Array(e.identity)};r.prototype={clear:function(){this.data=new Float32Array(this.identity)},rotate:function(e){var t=this,n=new Float32Array(t.identity),r=Math.cos(e).toFixed(15),i=Math.sin(e).toFixed(15);return n[0]=r,n[1]=i,n[3]=-i,n[4]=r,t.multiply(n,!1),t},scale:function(e,t){var n=this,r=new Float32Array(n.identity);return r[0]=e,r[4]=t,n.multiply(r,!1),n},skew:function(e,t){var n=this,r=new Float32Array(n.identity);return r[1]=Math.tan(e),r[3]=Math.tan(t),n.multiply(r),n},translate:function(e,t){var n=this,r=new Float32Array(n.identity);return r[2]=e||0,r[5]=t||0,n.multiply(r,!0),n},multiply:function(e,t){for(var n=this,r=new Float32Array(n.data),i=t?e:r,o=t?r:e,a=0;a<6;a++){var s=3*Math.floor(a/3),l=a%3;n.data[a]=i[s]*o[l]+i[s+1]*o[l+3]}n.data[2]+=i[2],n.data[5]+=i[5]},setFromCss:function(e){var t=e.match(/\(([^\)]+)\)/)[1].replace(/\s/g,"").split(",").map(Number);this.data=[t[0],t[1],t[4],t[2],t[3],t[5]]},getCss:function(){var e=this;return"matrix("+e.data[0]+","+e.data[1]+","+e.data[3]+","+e.data[4]+","+e.data[2]+","+e.data[5]+")"}};var i=r,o=function(){var e=this;e.identity=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),e.data=new Float32Array(e.identity)};o.prototype={clear:function(){this.data.set(this.identity)},rotateX:function(e){var t=this,n=Math.cos(e).toFixed(15),r=Math.sin(e).toFixed(15),i=new Float32Array(t.identity);return i[5]=n,i[6]=r,i[9]=-r,i[10]=n,t.multiply(i),t},rotateY:function(e){var t=this,n=Math.cos(e).toFixed(15),r=Math.sin(e).toFixed(15),i=new Float32Array(t.identity);return i[0]=n,i[2]=-r,i[8]=r,i[10]=n,t.multiply(i),t},rotateZ:function(e){var t=this,n=Math.cos(e).toFixed(15),r=Math.sin(e).toFixed(15),i=new Float32Array(t.identity);return i[0]=n,i[1]=r,i[4]=-r,i[5]=n,t.multiply(i),t},scale:function(e,t){var n=this,r=new Float32Array(n.identity);return r[0]=e,r[5]=t,n.multiply(r),n},skew:function(e,t){var n=this,r=new Float32Array(n.identity);return r[1]=Math.tan(t)||0,r[4]=Math.tan(e)||0,console.log(r[1],r[4]),n.multiply(r),n},translate:function(e,t,n){var r=new Float32Array(this.identity);return r[12]=e||0,r[13]=t||0,r[14]=n||0,this.multiply(r),this},multiply:function(e){var t=this,n=new Float32Array(t.data);t.data[0]=n[0]*e[0]+n[1]*e[4]+n[2]*e[8],t.data[1]=n[0]*e[1]+n[1]*e[5]+n[2]*e[9],t.data[2]=n[0]*e[2]+n[1]*e[6]+n[2]*e[10],t.data[3]=0,t.data[4]=n[4]*e[0]+n[5]*e[4]+n[6]*e[8],t.data[5]=n[4]*e[1]+n[5]*e[5]+n[6]*e[9],t.data[6]=n[4]*e[2]+n[5]*e[6]+n[6]*e[10],t.data[7]=0,t.data[8]=n[8]*e[0]+n[9]*e[4]+n[10]*e[8],t.data[9]=n[8]*e[1]+n[9]*e[5]+n[10]*e[9],t.data[10]=n[8]*e[2]+n[9]*e[6]+n[10]*e[10],t.data[11]=0,t.data[12]=n[12]*e[0]+n[13]*e[4]+n[14]*e[8]+e[12],t.data[13]=n[12]*e[1]+n[13]*e[5]+n[14]*e[9]+e[13],t.data[14]=n[12]*e[2]+n[13]*e[6]+n[14]*e[10]+e[14],t.data[15]=1},getCss:function(){var e=this;return"matrix3d("+e.data[0]+","+e.data[1]+","+e.data[2]+", 0,"+e.data[4]+","+e.data[5]+","+e.data[6]+", 0,"+e.data[8]+","+e.data[9]+","+e.data[10]+", 0,"+e.data[12]+","+e.data[13]+","+e.data[14]+", 1)"}},o.cssToData=function(e){return e.match(/\(([^\)]+)\)/)[1].replace(/\s/g,"").split(",").map(Number)};var a=n(0),s=function(){function e(e,t){this.x=e||0,this.y=t||0}var t=e.prototype;return t.add=function(e){return this.x+=e.x,this.y+=e.y,this},t.sub=function(e){return this.x-=e.x,this.y-=e.y,this},t.dist=function(e){var t=this.x-e.x,n=this.y-e.y;return Math.sqrt(t*t+n*n)},t.mult=function(e){return this.x*=e,this.y*=e,this},t.div=function(e){return this.x/=e,this.y/=e,this},t.limit=function(e){var t=this.length();return t>e&&this.mult(e/t),this},t.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},t.normalize=function(){var e=1/this.length();return this.mult(e)},t.clone=function(){return new e(this.x,this.y)},e.degreeToVector=function(t){var n=a.b.toRadians(t);return new e(Math.cos(n),Math.sin(n))},e.random=function(t){var n=t||.01;return e.degreeToVector(a.b.random(0,360,n))},e}();function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var c=function(){};l(c,"rx",[]),l(c,"ry",[]),l(c,"MAX_VERTICES",256),l(c,"MAX_VERTICES_MASK",255),l(c,"get",function(e,t){return new s(c._getVal("x",e),c._getVal("y",t))}),l(c,"_init",function(){for(var e=0;e<c.MAX_VERTICES;++e)e===c.MAX_VERTICES-1&&(c.rx.push(c.rx[0]),c.ry.push(c.ry[0])),c.rx.push(Math.random()-.5),c.ry.push(Math.random()-.5)}),l(c,"_lerp",function(e,t,n){return e*(1-n)+t*n}),l(c,"_getVal",function(e,t){0==c.rx.length&&c._init();var n="x"===e?c.rx:c.ry,r=(t%=c.MAX_VERTICES)-~~t,i=r*r*(3-2*r),o=~~t&c.MAX_VERTICES_MASK,a=o+1&c.MAX_VERTICES_MASK;return c._lerp(n[o],n[a],i)});var u=c;n.d(t,"a",function(){return i}),n.d(t,"b",function(){return u}),n.d(t,"c",function(){return s})},function(e,t,n){"use strict";var r=n(10);n(15),n(7);var i=n(8);n(4);n.d(t,"a",function(){return r.a}),n.d(t,"b",function(){return i})},function(e,t,n){"use strict";n.d(t,"b",function(){return i}),n.d(t,"a",function(){return o});var r={debug:!1,imagePaths:[],loadedImageNames:[],emitterDataFiles:[],emitterDataPath:"js",imagePath:"images",adPath:"",adWidth:"",adHeight:"",fps:60},i=function(e,t){e in r?r[e]=t:console.error("Can't set an undefined key in setting: "+e)},o=function(e){return r[e]}},function(e,t,n){"use strict";var r={};n.r(r),n.d(r,"get",function(){return o}),n.d(r,"getElement",function(){return a}),n.d(r,"removeChildren",function(){return s}),n.d(r,"addiFrame",function(){return l}),n.d(r,"addSvg",function(){return c}),n.d(r,"applyToElements",function(){return u});var i={};n.r(i),n.d(i,"setCss",function(){return h}),n.d(i,"getCss",function(){return p}),n.d(i,"injectStylesheet",function(){return f}),n.d(i,"addClass",function(){return _}),n.d(i,"removeClass",function(){return m});new function(){var e=this;e.isFullScreen=function(){return document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement},e.enter=function(t){e.isFullScreen()||(t.requestFullscreen?(console.log(" -> requestFullscreen"),t.requestFullscreen()):t.msRequestFullscreen?(console.log(" -> msRequestFullscreen"),t.msRequestFullscreen()):t.mozRequestFullScreen?(console.log(" -> mozRequestFullScreen"),t.mozRequestFullScreen()):t.webkitRequestFullscreen&&(console.log(" -> webkitRequestFullscreen"),t.webkitRequestFullscreen()))},e.exit=function(){e.isFullScreen()&&(document.exitFullscreen?(console.log(" -> exitFullscreen"),document.exitFullscreen()):document.msExitFullscreen?(console.log(" -> msExitFullscreen"),document.msExitFullscreen()):document.mozCancelFullScreen?(console.log(" -> mozCancelFullScreen"),document.mozCancelFullScreen()):document.webkitExitFullscreen&&(console.log(" -> webkitExitFullscreen"),document.webkitExitFullscreen()))}};n(0);function o(e,t){if("string"!=typeof e)return e;switch(t=t||document,(e=e.trim())[0]){case"#":return t.getElementById(e.slice(1));case".":return t.getElementsByClassName(e.slice(1));case"<":return t.getElementsByTagName(e.slice(1,e.length-1));default:return t.getElementById(e)}}function a(e,t){return o(e,t)}function s(e){var t=o(e);for(console.log("removeChildren ("+e+")");t.firstChild;)t.removeChild(t.firstChild)}function l(e){var t=document.createElement("iFrame");return t.id=e.id,t.width=e.css.width,t.height=e.css.height,delete e.css.width,delete e.css.height,t.setAttribute("src",e.source),t.setAttribute("frameborder","0"),t.setAttribute("scrolling","no"),t.setAttribute("allowfullscreen",""),applyContainerCss(t,e),e.target.appendChild(t),t}function c(e){var t=document.createElementNS("http://www.w3.org/2000/svg","svg");t.setAttribute("height",e.height),t.setAttribute("width",e.width);var n=document.createElementNS("http://www.w3.org/2000/svg","path");return n.setAttribute("d",e.d),n.setAttribute("fill",e.fill),void 0!=e.stroke&&n.setAttribute("stroke",e.stroke),void 0!=e.strokeWidth&&n.setAttribute("stroke-width",e.strokeWidth),t.appendChild(n),applyContainerCss(t,e),e.target.appendChild(t),t}function u(e){var t;if(void 0===e.elements.length)e.method.call(e.scope,e.elements,e.methodArg);else for(t=0;t<e.elements.length;t++){var n=e.elements[t];e.method.call(e.scope,n,e.methodArg)}}var d=n(2);function h(e,t){e=o(e);var n={};if(arguments.length>2)for(var r=1;r<arguments.length;r+=2)n=d.a.conformCssKeyValue(arguments[r],arguments[r+1]);else n="string"==typeof arguments[1]?d.a.conformCssString(arguments[1],e):d.a.conformCssObject(arguments[1],e);d.a.apply(e,n)}function p(e,t){var n;if(e=o(e),"x"==t||"y"==t){var r=e.style[d.a.getDeviceKey("transform")].replace(/[\s\(\)matrix]/g,"").split(",");n=r.length<6?0:+r["x"==t?4:5]}else{n=window.getComputedStyle(e,null).getPropertyValue(t).replace(/px/,""),isNaN(n)||(n=parseInt(n,10))}return n}function f(e,t){if(!document.getElementById(e)){var n=document.createElement("style");n.type="text/css",n.id=e;var r=2===arguments.length?t:"";if(arguments.length>2)for(var i=0;i<arguments.length-1;i+=2){r+=arguments[i+1].replace(/\,\s+/g,","),r+=" { "+(arguments[i+2]||"")+" }\n"}n.innerHTML=r,document.getElementsByTagName("head")[0].appendChild(n)}}function _(e,t){for(var n=o(e),r=0;r<arguments.length-1;r++)n.classList.add(arguments[r+1])}function m(e,t){o(e).classList.remove(t)}n.d(t,"a",function(){return r}),n.d(t,"b",function(){return i})},function(e,t,n){"use strict";var r={create:function(e){return document.createElement(e)},addClass:function(e,t){e.classList.add(t)},removeClass:function(e,t){e.classList.remove(t)},setStyle:function(e,t){for(var n in t)e.style[n]=t[n]},setGroupStyle:function(e,t){var n;for(n=0;n<e.length;n++)this.setStyle(e[n],t)}};t.a=r},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o=function(){function e(){}return function(e,t,n){t&&r(e.prototype,t),n&&r(e,n)}(e,null,[{key:"orientation",get:function(){return window.innerWidth>window.innerHeight?"landscape":"portrait"}},{key:"dimensions",get:function(){return{width:window.innerWidth,height:window.innerHeight}}}]),e}();i(o,"pixelRatio",window.devicePixelRatio||"unknown"),i(o,"init",function(){console.log("Device.init()");var e=this;e.agentString=navigator.userAgent,e._getType(),e._getBrandAndOS(),e._getBrowser(),"desktop"!==e.type&&"windows"===e.os&&e.osVersion<=8&&"ie"===e.browser&&e.browserVersion<12&&(console.log("You appear to be on Windows 7 or 8 using Internet Explorer 11 or under. You also appear to be on a touchscreen device. We will assume you're actually on a desktop, since it's extremely unlikely you're on a tablet or mobile device using this specific operating system and browser."),e.type="desktop");var t=Array(70).join("-"),n="\n"+t;for(var r in e)e.hasOwnProperty(r)&&"function"!=typeof e[r]&&(n+="\n"+r+": "+e[r]);n+="\n"+t,console.log(n)}),i(o,"_getType",function(){var e=this,t=/(android|mobile)/gi.exec(e.agentString),n=/(tablet|touch)/gi.exec(e.agentString),r=/(ipad)/gi.exec(e.agentString);e.type="desktop",t&&(e.type="mobile"),n&&(e.type="tablet"),r&&(e.type="tablet")}),i(o,"_getBrandAndOS",function(){var e=this,t=e.agentString.match(/ip(hone|od|ad)|mac/gi);if(t){e.brand="apple",e.product=t[0].toLowerCase();var n=/(OS\s)(\X\s|)([\d\.\_]+)/gi.exec(e.agentString);return e.os=""==n[2]?"ios":"osx",void(e.osVersion=n[3].replace(/\_/g,"."))}var r=/(android)\/?\s*([0-9\.]+)/gi.exec(e.agentString);if(r)return e.brand=e.product=e.os=r[1].toLowerCase(),e._checkForSpecial("product",["pixel 2"],e.agentString.split("(")[1].split(")")[0]),void(e.osVersion=r[2]);var i=/(windows\snt\s|windows\sphone)\/?\s*([0-9\.]+)/gi.exec(e.agentString);if(i){switch(e.brand="microsoft",e.os="windows",i[2]){case"5.2":e.osVersion="xp";break;case"6.0":e.osVersion="vista";break;case"6.1":e.osVersion="7";break;case"6.2":e.osVersion="8";break;case"6.3":e.osVersion="8.1";break;case"10.0":e.osVersion="10";break;default:e.osVersion=i[2]}return e.product=i[1].toLowerCase(),void(e.product.match(/\snt/i)&&(e.product="pc"))}e.agentString.match(/(blackberry|bb10|playbook)/i)&&(e.brand=e.product=e.os="blackberry",e.osVersion=/(version)\/?\s*([0-9\.]+)/gi.exec(e.agentString)[2])}),i(o,"_getBrowser",function(){var e=this,t=/(edge(?=\/))\/?\s*([0-9\.]+)/i.exec(e.agentString);if(t||(t=e.agentString.match(/(fban|fbav|opera|chrome|crios|safari|firefox|msie|trident(?=\/))\/?\s*([0-9\.]+)/i)),!t||t.length<3){switch(console.log("we received no browser data, so we are setting it to the default of the device"),e.os){case"ios":e.browser="safari";break;case"windows":e.browser="trident";break;default:e.browser="chrome"}e.browserVersion="os-default"}else switch(console.log("we received browser data"),e.browser=t[1].toLowerCase(),e.browserVersion=t[2],e.browser){case"trident":(n=/\brv:+(\d+)/g.exec(e.agentString))&&(e.browserVersion=n[1]);case"msie":e.browser="ie";break;case"crios":e.browser="chrome";break;case"safari":(n=e.agentString.match(/\sversion\/([0-9\.]+)\s/i))&&(e.browserVersion=n[1]);break;case"chrome":var n;(n=e.agentString.match(/\b(OPR)\/([0-9\.]+)/i))&&(e.browser="opera",e.browserVersion=n[2])}}),i(o,"_checkForSpecial",function(e,t,n){for(var r,i=0;i<t.length;i++)if(r=t[i].toLowerCase(),n.match(new RegExp(r,"i"))){this[e]=r;break}});var a=o;n.d(t,"a",function(){return a})},function(e,t,n){"use strict";var r={};n.r(r),n.d(r,"Event",function(){return l}),n.d(r,"stop",function(){return c}),n.d(r,"stopped",function(){return u}),n.d(r,"startPoint",function(){return d}),n.d(r,"endPoint",function(){return h}),n.d(r,"OVER",function(){return p}),n.d(r,"OUT",function(){return f}),n.d(r,"MOVE",function(){return _}),n.d(r,"PRESS",function(){return m}),n.d(r,"RELEASE",function(){return g}),n.d(r,"CLICK",function(){return v}),n.d(r,"DRAG",function(){return b}),n.d(r,"DRAG_START",function(){return y}),n.d(r,"DRAG_STOP",function(){return w}),n.d(r,"SWIPE",function(){return x});var i=n(6),o=n(4),a={},s=!1;var l=function(e,t,n,r,i,o,a,s,l,c,u){var d=new CustomEvent(e);return d.mouse={global:{x:t,y:n},local:{x:r,y:i}},d.element={x:o||0,y:a||0},d.distance={x:s||0,y:l||0},d.velocity={x:c||0,y:u||0},d.direction={x:c>0?"right":c<0?"left":null,y:u>0?"down":u<0?"up":null},d};var c=function(e){e&&(e.stopImmediatePropagation(),a[e.type]=!0)};var u=function(e){return void 0!=a[e]};function d(){s||(s=!0,a={})}function h(){s=!1}var p="mouseover",f="mouseout",_="mousemove",m="onPress",g="onRelease",v="onSelect",b="onDrag",y="onDragStart",w="onDragStop",x="onSwipe",E=function(){function e(e){var t=this;t.elem=e,t.hasActiveChildren=!0,t.debug=!1,t.eventList=[],t._isDragEnabled=!1,t._isDragging=!1,t._give=2,t._oX=0,t._oY=0,t._p1X=0,t._p1Y=0,t._p2X=0,t._p2Y=0,t._sX=0,t._sY=0,t._vX=0,t._vY=0,t._cursor="mouse",t._start="down",t._end="up",t.init()}var t=e.prototype;return t.init=function(){var e=this;e.debug&&console.log("GestureBase.init()"),e._handleTouchStart=e._handleTouchStart.bind(e),e._handleDown=e._handleDown.bind(e),e._handleDrag=e._handleDrag.bind(e),e._handleUp=e._handleUp.bind(e),e._elemAdd=e.elem.addEventListener.bind(e.elem),e._elemRemove=e.elem.removeEventListener.bind(e.elem),e._reset()},t.register=function(e,t){var n=this;n.debug&&console.log("GestureBase.register(",e,")"),n.eventList.push(e),n._checkDragEnabled(),n._elemAdd(e,t)},t.unregister=function(e,t){var n=this;n.debug&&console.log("GestureBase.unregister(",e,")");var r=n.eventList.indexOf(e);r>=0&&n.eventList.splice(r,1),n._checkDragEnabled(),n._elemRemove(e,t)},t._reset=function(){var e=this;e._cursor="mouse",e._start="down",e._end="up",e.elem.addEventListener("touchstart",e._handleTouchStart),"ios"!=i.a.os&&e.elem.addEventListener("mousedown",e._handleDown)},t._checkDragEnabled=function(){var e=this.eventList.join("").indexOf("onDrag");this._isDragEnabled=e>-1},t._getEventScope=function(e){return e.changedTouches?e.changedTouches[0]:e},t._add=function(e,t){window.addEventListener(this._cursor+e,t)},t._remove=function(e,t){window.removeEventListener(this._cursor+e,t)},t._handleDown=function(e){var t=this;t.debug&&console.log("GestureBase._handleDown()"),d(),t.elem.removeEventListener("touchstart",t._handleTouchStart),"ios"!=i.a.os&&t.elem.removeEventListener("mousedown",t._handleDown),t._isDragging=!1,t._add(t._end,t._handleUp),t._add("move",t._handleDrag);var n=t._getEventScope(e),r=n.pageX,a=n.pageY,s=t.elem.getBoundingClientRect(),c=r-s.left,h=a-s.top,p=t.elem.x||o.b.getCss(t.elem,"x"),f=t.elem.y||o.b.getCss(t.elem,"y"),_=s.left-p,m=s.top-f;t._oX=_+c,t._oY=m+h;var g=r-t._oX,v=a-t._oY;t._sX=t._p1X=t._p2X=r,t._sY=t._p1Y=t._p2Y=a,function(e){if(u(e))return;var n=new l(e,r,a,c,h,g,v);t.debug&&console.log(" -> dispatch",e);t.elem.dispatchEvent(n)}("onPress")},t._handleUp=function(e,t){var n=this;n.debug&&console.log("GestureBase._handleUp()"),n._remove(n._end,n._handleUp),n._remove("move",n._handleDrag);var r=n._getEventScope(e),i=r.pageX,o=r.pageY,a=n.elem.getBoundingClientRect(),s=i-a.left,c=o-a.top,d=i-n._oX,p=o-n._oY;!0!==t&&v("onRelease");var f=a.top+window.pageYOffset,_=f+a.height,m=a.left+window.pageXOffset,g=m+a.width;function v(e){if(!u(e)){var t=new l(e,i,o,s,c,d,p,0,0,n._vX,n._vY);n.debug&&console.log(" -> dispatch",e),n.elem.dispatchEvent(t)}}n._isDragging?(n._isDragEnabled&&n._dragEndOrSwipe("onDragStop"),console.log("  -> No CLICK Fired, was dragging")):i>m&&i<g&&o>f&&o<_&&v("onSelect"),n._isDragging&&n._dragEndOrSwipe("onSwipe"),n._reset(),e.preventDefault(),h()},t._handleTouchStart=function(e){var t=this;t.debug&&console.log("GestureBase._handleTouchStart()"),t._cursor="touch",t._start="start",t._end="end",t._handleDown(e)},t._handleDrag=function(e){var t=this;t.debug&&console.log("GestureBase._handleDrag()");var n=t._getEventScope(e),r=n.pageX,i=n.pageY,o=r-t._p1X,a=r-t._p2X;t._vX=(a-o)/2+o;var s=i-t._p1Y,c=i-t._p2Y;t._vY=(c-s)/2+s;var d=r-t._oX,h=i-t._oY,p=t.elem.getBoundingClientRect(),f=r-p.left,_=i-p.top;function m(e){if(!u(e)){var n=new l(e,r,i,f,_,d,h,t._p1X-t._sX,t._p1Y-t._sY,t._vX,t._vY);t.debug&&console.log(" -> dispatch",e),t.elem.dispatchEvent(n)}}t._isDragging?t._isDragEnabled&&m("onDrag"):(Math.abs(t._sX-r)>t._give||Math.abs(t._sY-i)>t._give)&&(t._isDragging=!0,t._isDragEnabled&&m("onDragStart")),t._p2X=t._p1X,t._p1X=r,t._p2Y=t._p1Y,t._p1Y=i},t._dragEndOrSwipe=function(e){var t=this;if(t.debug&&console.log("GestureBase._dragEndOrSwipe()",e),!u(name)){var n=t.elem.getBoundingClientRect(),r=new l(e,t._p1X,t._p1Y,t._p1X-n.left,t._p1Y-n.top,t._p1X-t._oX,t._p1Y-t._oY,t._p2X-t._sX,t._p2Y-t._sY,t._vX,t._vY);t.debug&&console.log(" -> dispatch",e),t.elem.dispatchEvent(r)}},e}();new function(){var e=this,t=[],n=[],r=void 0!=document.createEventObject;function i(e){for(var n=null,r=0;r<t.length;r++)if(t[r].elem===e){n=t[r];break}return n||(n=function(e){var n=new E(e);return t.push(n),n}(e)),n}function a(t,n){var r=i(t);if(r.hasActiveChildren!=n){r.hasActiveChildren=n;for(var o=r.elem.getElementsByTagName("*"),a=0;a<o.length;a++)o[a].parentNode==t&&(n?e.enable(o[a]):e.disable(o[a]))}}function s(e){for(var t=[],r=function e(t,r,i,o){t.style.visibility="hidden",o.push(t);for(var a=document.elementFromPoint(r,i),s=0;s<n.length;s++)if(n[s].elem==a)return e(a,r,i,o);return a}(e.target,e.clientX,e.clientY,t),i=0;i<t.length;i++)t[i].style.visibility="visible";return t=[],e.stopImmediatePropagation(),r}function l(e){var t=s(e),n=document.createEvent("HTMLEvents");n.initEvent(e.type,!0,!1),t.dispatchEvent(n)}e._kills={},e.add=e.addEventListener=function(e,t,n){i(e).register(t,n),o.b.setCss(e,"cursor","pointer"),o.b.setCss(e,"pointer-events","auto")},e.remove=e.removeEventListener=function(e,t,n){var r=i(e);r&&(r.unregister(t,n),r.eventList.length<=0&&o.b.setCss(e,"cursor","auto"))},e.disable=function(e){var t=i(e);n.push(t),r?(t.register(GestureEvent.CLICK,l),o.b.setCss(e,"cursor","auto")):o.b.setCss(e,"pointer-events","none")},e.disableChildren=function(e){a(e,!1)},e.enable=function(e){for(var t=i(e),a=0;a<n.length;a++)if(t==n[a]){r?t.unregister(GestureEvent.CLICK,l):(o.b.setCss(e,"pointer-events","auto"),o.b.setCss(e,"cursor","pointer"));break}},e.enableChildren=function(e){a(e,!0)}};function C(e){var t=this;t.pool=[],t.fps=e,t._frameTime=Math.floor(1e3/t.fps),t._prevTime=0,t._startTime=0,t._nextTime=0,t._maxLag=400,t._shiftLag=30,t._paused=!1,t._prevCallTime=Date.now(),t.diffTime=0}C.prototype={resume:function(){var e=this;e._isPaused&&(e._startTime=Date.now(),e._prevCallTime=e._startTime,e._prevTime=e._startTime,e._nextTime=0,e._isPaused=!1)},tick:function(){var e=this;if(!e._paused){var t=!1,n=Date.now(),r=n-e._prevTime;r>e._maxLag&&(console.log("...lag"),e._startTime+=r-e._shiftLag),e._prevTime=n;var i=e._prevTime-e._startTime-e._nextTime;i>0&&(e._nextTime+=i>=e._frameTime?i:e._frameTime,t=!0,e.diffTime=n-e._prevCallTime,e._prevCallTime=n),t&&e.dispatch()}},dispatch:function(){for(var e=0;e<this.pool.length;e++){var t=this.pool[e];t.handler.call(t.from,this)}}};var A=C;n(25);function S(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var k=function(){};S(k,"_isPaused",!0),S(k,"_isActive",!0),S(k,"_sets",{}),S(k,"_RAF",void 0),S(k,"register",function(e,t,n){var r=k;n=n||30,r._sets[n]||(r._sets[n]=new A(n));for(var i=r._sets[n].pool,o=0;o<i.length;o++)if(i[o].from===e&&i[o].handler===t)return;i.push({handler:t,from:e}),console.log("pool is now:",i),r._isActive&&r.resume()}),S(k,"unregister",function(e,t,n){var r=k;for(var i in r._sets)if(!n||i==n){for(var o=r._sets[i].pool,a=0;a<o.length;a++)if(o[a].from===e&&o[a].handler===t){o.splice(a,1);break}0==o.length&&delete r._sets[i]}0===Object.keys(r._sets).length&&(r.pause(),r._isActive=!0)}),S(k,"pause",function(){var e=k;if(arguments.length>0){for(var t=0;t<arguments.length;t++){var n=t<0||arguments.length<=t?void 0:arguments[t];e._sets[n]&&(e._sets[n]._paused=!0,e._isPaused=!0)}for(var r in e._sets)if(!e._sets[r]._paused){e._isPaused=!1;break}}else{for(var r in e._sets)e._sets[r]._paused=!0;e._isPaused=!0}e._isPaused&&(e._isActive=!1,window.cancelAnimationFrame(e._RAF))}),S(k,"resume",function(){var e=k,t=!e._isPaused;if(arguments.length>0)for(var n=0;n<arguments.length;n++){var r=n<0||arguments.length<=n?void 0:arguments[n];e._sets[r]&&(e._sets[r]._paused=!1,e._isPaused=!1)}else{for(var i in e._sets)e._sets[i]._paused=!1;e._isPaused=!1}t||(e._isActive=!0,e._RAF=window.requestAnimationFrame(e.tick))}),S(k,"secondsAsFrames",function(e){return 1/e}),S(k,"tick",function(){var e=k;if(!e._isPaused){for(var t in e._sets)e._sets[t].tick();window.requestAnimationFrame(e.tick)}});var T=k;n.d(t,"a",function(){return T}),n.d(t,"b",function(){return r})},function(e,t,n){"use strict";n.r(t),function(e){n.d(t,"addToLoad",function(){return f}),n.d(t,"addLoader",function(){return _}),n.d(t,"get",function(){return m}),n.d(t,"available",function(){return g}),n.d(t,"load",function(){return v}),n.d(t,"addFbaImages",function(){return b}),n.d(t,"addToDictionary",function(){return y});var r,i=n(9),o=[],a=[],s=[],l=[],c={},u=!1,d=0,h=function(){},p=function(){};function f(e,t){var n=i.a.getFileName(e);g(n,!0)||(t&&1==t.forCanvas?a.push(e):o.push(e));return n}function _(e){s.push(e)}function m(e){if(c[e])return c[e];throw new Error("ImageManager : No image named '"+e+"' has been loaded")}function g(e,t){var n=void 0!=c[e];return n?t&&console.log("ImageManager.available() --\x3e",!0,': Duplicate Image Id "'+e+'". One or more images loading in have the same name. Each Image needs a unique file name.'):t||console.log("ImageManager.available() --\x3e",!1,": No image named '"+e+"' has been loaded"),n}function v(t,n){if(p=n||e.failAd,u)l.push(t);else{r=new i.b({name:"imageManagerLoader",onComplete:function(e){u=!1,y(e.getAllContentRaw())},onFail:function(e){u=!1,p.call()}}),h=[].concat(t),l=[];var c=o.slice();o=[],r.add(new i.b(c,{name:"dynamicImages-"+d++,fileType:"jpg"}));var f=a.slice();a=[],r.add(new i.b(f,{name:"dynamicCanvasImages-"+d++,fileType:"jpg",crossOrigin:"anonymous"}));var _=s.slice();s=[];for(var m=0;m<_.length;m++)r.add(_[m]);u=!0,r.load()}}function b(e){e&&y(e.getAllContentRaw())}function y(e){for(var t=0;t<e.length;t++)if(e[t]instanceof Image||e[t]instanceof SVGElement){var n=e[t];g(e[t].id,!0)||(c[n.id]=n)}console.log("ImageManager:",c);for(t=0;t<h.length;t++)h[t].call();l.length>0&&v(l)}}.call(this,n(12))},function(e,t,n){"use strict";var r={};n.r(r),n.d(r,"createXMLHttpRequest",function(){return c}),n.d(r,"getFileName",function(){return u}),n.d(r,"getFontName",function(){return d}),n.d(r,"getFileType",function(){return h}),n.d(r,"getFullUrl",function(){return p}),n.d(r,"getUrlPrepend",function(){return f}),n.d(r,"getParamsFromData",function(){return _});var i=function(e){return new o(e)},o=function(){function e(e){this.superclass=e}return e.prototype.with=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(function(e,t){return t(e)},this.superclass)},e}();function a(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var s=function(e){return function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];t=e.call.apply(e,[this].concat(r))||this;var o=arguments&&arguments.length>1?arguments[1]:arguments[0]||{},s=a(a(t));return s.onComplete=o.onComplete||function(){},s.onFail=o.onFail||function(){},s.onProgress=o.onProgress||function(){},s.name=o.name||"",s.scope=o.scope||s,s.dataRaw,s.cacheBuster=o.cacheBuster||!1,s._failCalled=!1,t}return function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}(t,e),t.prototype._handleFail=function(){var e=this;e._failCalled||(e._failCalled=!0,e.onFail.call(e.scope,e),console.log('Loader "'+e.name+'" Fail:',e.url))},t}(e)};function l(e){var t=e.search(/^\/\//)>-1;if(e.search(/^http/)>-1||t){var n=window.location.href.search(/^https/)>-1||window.adParams&&adParams.forceHttps,r=n?"https://":"http://";if(t&&(e=e.replace(/^\/\//,r)),e.search(/.*edgecastcdn/)>-1)e=r+(n?"ne1."+e.match(/w(a|p)c/i)[0]+".":e.match(/w(a|p)c\.[a-z0-9]*\./i)[0])+"edgecastcdn"+e.replace(/.*edgecastcdn/,"");else if(e.search(/.*paramount\.com/)>-1){e=r+(n?"paramountdlds-a.akamaihd.net":"downloads.paramount.com")+e.replace(/.*paramount\.com/,"")}else e=e.search(/espn\.go\.com/)>-1||e.search(/secure\.espncdn\.com/)>-1?"https://secure.espncdn.com"+e.replace(/^.*\.com/,""):e.replace(/^https?\:\/\//i,r)}return e}function c(){try{return new XMLHttpRequest}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(e){}return console.warn("XMLHttpRequest not supported"),null}function u(e){var t=e.lastIndexOf("."),n=e.lastIndexOf("/")+1;return n>t&&(t=void 0),e.substring(n,t)}function d(e){return e.substring(e.lastIndexOf("/")+1,e.indexOf("."))}function h(e){var t=(e=e||"").indexOf("?");t>-1&&(e=e.substr(0,t));var n=e.match(/[^\\]*\.(\w+)$/),r=e.match(/image\/(jpeg|jpg|png)/);return n?n[1]:r?r[1]:"unknown"}function p(e,t,n){var r=l(f(e)+_file);return n&&(r=n(r)),url}function f(e){return e?e.replace(/\/?$/,"/"):""}function _(e){if("string"==typeof e)return e;var t="";for(var n in e)console.log("      prop =",n),t+=n+"="+e[n]+"&";return t.substr(0,t.length-1)}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var g=function(e){return function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];t=e.call.apply(e,[this].concat(r))||this;var o=arguments&&arguments.length>1?arguments[1]:arguments[0]||{},a=m(m(t));return a.url=l(arguments[0]||""),o.platformGetUrl&&(a.platformGetUrl=o.platformGetUrl,a.url=o.platformGetUrl(a.url)),a.fileName=void 0===o.id?u(a.url):o.id,a.fileType=o.fileType||h(a.url),t}return function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}(t,e),t}(e)};var v=function(e){return function(e){function t(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.call.apply(e,[this].concat(n))||this}!function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}(t,e);var n=t.prototype;return n._setTicker=function(e){var t=this,n=document.createElement("div");n.innerHTML=e.content,n.style.cssText=e.css||"",document.body.appendChild(n);var r=void 0!=e.width?e.width:n.offsetWidth;n.style.fontFamily=e.font||"";var i=setTimeout(function(){clearInterval(o),t._handleFail()},5e3),o=setInterval(function(){n.offsetWidth!=r&&(clearTimeout(i),clearInterval(o),t._handleTickerComplete(n))},10)},n._removeTickerNode=function(e){e.parentNode.removeChild(e)},t}(e)};var b=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];t=e.call.apply(e,[this].concat(r))||this;var o=arguments&&arguments.length>1?arguments[1]:arguments[0]||{};return t.renderOnly=!!o.renderOnly,t.crossOrigin=o.crossOrigin,t}!function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}(t,e);var n=t.prototype;return n.load=function(){var e=this;if(e.renderOnly)e._setTicker({content:e.url,width:0});else{var t=new Image;t.id=e.fileName,t.crossOrigin=e.crossOrigin,t.onload=e._handleComplete.bind(e),t.onerror=e._handleFail,t.src=e.url}},n._handleComplete=function(e){var t=this;t.dataRaw=e.target,t.onComplete.call(t.scope,t)},t}(i(function(){}).with(s,g,v));var y=function(e){function t(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.call.apply(e,[this].concat(n))||this}!function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}(t,e);var n=t.prototype;return n.load=function(){var e,t=this;(e="css"==t.fileType?t._createCssLink():"html"==t.fileType?t._createHtmlLink():t._createScript()).charset="utf-8",e.onload=t._handleComplete.bind(t),e.onerror=t._handleFail,"css"==t.fileType||"html"==t.fileType?e.href=this.url:e.src=t.url,document.getElementsByTagName("head")[0].appendChild(e)},n._createCssLink=function(){var e=document.createElement("link");return e.rel="stylesheet",e.type="text/css",e},n._createHtmlLink=function(){var e=document.createElement("link");return e.rel="import",e},n._createScript=function(){var e=document.createElement("script");return e.type="text/javascript",e},n._handleComplete=function(e){var t=this;t.dataRaw=e.target,t.onComplete.call(t.scope,t)},t}(i(function(){}).with(s,g));function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var x=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];t=e.call.apply(e,[this].concat(r))||this;var o=arguments&&arguments.length>1?arguments[1]:arguments[0]||{},a=w(w(t));return a.method=(o.method||"get").toLowerCase(),a.query=o.query||null,a.responseType=o.responseType||null,t}!function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}(t,e);var n=t.prototype;return n.load=function(){var e=this,t=null,n="post"===e.method;e.req=c(),void 0!=e.responseType&&(e.req.responseType=e.responseType);var r=e.url;switch(e.query&&(t=_(e.query),encodeURIComponent(t),n||(r+="?"+t,t=null)),e.cacheBuster&&(r+=e.query&&!n?"&":"?",r+="cb="+(new Date).getTime()),e.req.onreadystatechange=e._handleStateChange.bind(e),e.req.open(e.method,r,!0),e.fileType){case"xml":e.req.overrideMimeType&&e.req.overrideMimeType("text/xml");break;case"json":e.req.overrideMimeType&&e.req.overrideMimeType("application/json");break;case"fba":case"bin":case"binary":e.responseType=e.req.responseType="arraybuffer"}"post"===e.method&&e.req.setRequestHeader("Content-type","application/x-www-form-urlencoded"),e.req.send(t)},n._handleStateChange=function(e){var t=this;switch(t.req.readyState){case 3:200==this.req.status&&(t.dataRaw=t.responseType?t.req.response:t.req.responseText,t._handleProgress(t));break;case 4:200==t.req.status?(t.dataRaw=t.responseType?t.req.response:t.req.responseText,t._handleComplete(t)):t._handleFail({target:e})}},n._handleProgress=function(){var e=this;e.onProgress.call(e.scope,e)},n._handleComplete=function(){var e=this;e.onComplete.call(e.scope,e)},t}(i(function(){}).with(s,g));var E=function(e){function t(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.call.apply(e,[this].concat(n))||this}!function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}(t,e);var n=t.prototype;return n.load=function(){var e=this;e.fileName=e.fileName.split(".")[0];var t="@font-face { font-family: "+e.fileName+"; src: url("+e.url+") format('truetype'); }",n=document.getElementById("RED_fontStyleSheet");if(n)n.innerHTML+=t;else{var r=document.createElement("style");r.type="text/css",r.media="screen",r.id="RED_fontStyleSheet",r.appendChild(document.createTextNode(t)),document.getElementsByTagName("head")[0].appendChild(r)}e._setTicker({content:" !\"\\#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[]^_`abcdefghijklmnopqrstuvwxyz{|}~",css:"position:absolute; top:-1000px; font-size:100px; font-family:san-serif; font-variant:normal; font-style:normal; font-weight:normal; letter-spacing:0; white-space:nowrap;",font:e.fileName})},n._handleTickerComplete=function(e){var t=this;setTimeout(function(){t._removeTickerNode(e)},300),t._handleComplete()},n._handleComplete=function(e){var t=this;t.dataRaw=t.fileName,t.onComplete.call(t.scope,t)},t}(i(function(){}).with(s,g,v));function C(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}n.d(t,"b",function(){return A}),n.d(t,"a",function(){return r});var A=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];t=e.call.apply(e,[this].concat(r))||this;var o=arguments&&arguments.length>1?arguments[1]:arguments[0]||{},a=C(C(t));return a._queue={},a._total=0,a._active=!1,a._startedCount=0,a.prepend=o.prepend||"",a.platformGetUrl=o.platformGetUrl,a.fileType=o.fileType||null,a.content=[],a.crossOrigin=o.crossOrigin||void 0,a.add(arguments[0]),t}!function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}(t,e);var n=t.prototype;return n.add=function(e){var n=this;if("string"==typeof e)n._addSingleLoad(e);else if(e instanceof Array)for(var r=0;r<e.length;r++)n._addSingleLoad(e[r]);else e instanceof t&&(e.content&&e.content[0]&&"fba"==e.content[0].fileType?n._addFbaSubLoads(e.content[0]):n._addSubLoad(e))},n.load=function(){var e=this;if(e._active=!0,e._total<=0)console.log('Loader "'+e.name+'" has NO assets to be loaded.');else{var n=!1,r="";for(var i in e._queue)if(!(e._queue[i]instanceof t)){n||(n=!0,r+='Loader "'+e.name+'" requesting:');var o=e._queue[i].fileName,a=e._queue[i].fileType,s=o.indexOf("."+a)>-1?o:o+"."+a;r+="\n\t -> "+(e._queue[i].prepend||"")+s}n&&console.log(r)}e._startSingleLoad(0)},n.getAllContent=function(){var e=[];return function n(r){for(var i=0;i<r.length;i++)r[i]instanceof t?n(r[i].content):e.push(r[i])}(this.content),e.length<1&&console.log("No Content found"),e},n.getAllContentRaw=function(){for(var e=this.getAllContent(),t=0;t<e.length;t++)e[t]=e[t].dataRaw;return e},n.getLoader=function(e){var n=null;return function r(i){for(var o=0;o<i.length;o++)i[o]instanceof t&&(!i[o]||i[o].name!==e&&i[o]!==e?r(i[o].content):n=i[o])}(this.content),n||console.log("No Loader found of that name"),n},n._addSingleLoad=function(e,t){var n,r=this,i=t?t[1]:r.fileType||h(e);switch(i){case"jpg":case"jpeg":case"gif":case"png":case"svg":n=b;break;case"ttf":case"woff":n=E;break;case"json":case"fba":case"bin":case"binary":case"svg+xml":n=x;break;default:n=y}var o=new n(t?e:r.prepend+e,{scope:r,platformGetUrl:r.platformGetUrl,onComplete:r._handleSingleLoadComplete,onFail:r._handleFail,fileType:i,cacheBuster:r.cacheBuster,crossOrigin:r.crossOrigin});t&&(o.fileName=t[0]),o.queueIndex=r._total,r._queue[r._total]=o,r._total++},n._addSubLoad=function(e){var t=this;e.onComplete=t._handleSingleLoadComplete.bind(t),e.onProgress=t._handleProgress.bind(t),e.onFail=t._handleFail,e.queueIndex=t._total,t._queue[t._total]=e,t._total++},n._addFbaSubLoads=function(e){var t=new Uint8Array(4),n=new Uint32Array(t.buffer),r=44,i=new Uint8Array(e.dataRaw,r,1)[0];r+=5;for(var o=0;o<i;o++){for(var a=new Uint8Array(e.dataRaw,r,4),s=4,l=0;l<4;l++)t[--s]=a[l];var c=n[0];r+=7;var u=String.fromCharCode(new Uint8Array(e.dataRaw,r++,1)),d=new Uint8Array(e.dataRaw,r+3,1)[0]||0,h=new Uint8Array(e.dataRaw,r+4,d),p=String.fromCharCode.apply(String,h);d+=4;var f=new Uint8Array(e.dataRaw,r+d,c-d);r+=c+4;var _=p.split("."),m="f"==u?"application/x-font-ttf":"image/"+("svg"==_[1]?"svg+xml":_[1]),g=new Blob([f],{type:m}),v=URL.createObjectURL(g);this._addSingleLoad(v,_)}},n._startSingleLoad=function(e){var n=this,r=n._queue[e];0==n._total?n._handleComplete():e<n._total&&(r instanceof t||e<n._total-1&&n._startLoadTimeOut(++e),r.load())},n._startLoadTimeOut=function(e){var t=this;setTimeout(function(){t._startSingleLoad(e)},10)},n._handleSingleLoadComplete=function(e){var t=this;t.content[e.queueIndex]=e,delete t._queue[e.queueIndex],t._handleProgress(),void 0==e.url&&e.queueIndex<t._total-1&&t._startLoadTimeOut(e.queueIndex+1)},n._handleProgress=function(){for(var e=this,t=e.content.length,n=0,r=0;r<t;r++)e.content[r]&&n++;var i=n,o=0;n<e._total&&e._queue[n]&&(o=e._queue[n].progress/e._total||0),e.progress=i/e._total+o,e.rawProgress=n/e._total+o,e.onProgress.call(e.scope,e),n>=e._total&&e._handleComplete()},n._handleComplete=function(){var e=this;e.onComplete.call(e.scope,e)},t}(i(function(){}).with(s))},function(e,t,n){"use strict";var r=n(6),i=n(1);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=function(){};o(a,"debug_level1",!1),o(a,"debug_level2",!1),o(a,"filter",void 0),o(a,"debug_element",void 0),o(a,"debug_css_list",void 0),o(a,"init",function(){console.log("CssManager.init()"),this.generateBrowserKeyDictionary()}),o(a,"setDebugLevel",function(e){var t=this;switch(parseInt(e)){case 1:t.debug_level1=!0,t.debug_level2=!1;break;case 2:t.debug_level1=!0,t.debug_level2=!0;break;default:t.debug_level1=!1,t.debug_level2=!1}}),o(a,"setDebugFilter",function(e){console.log("CssManager.setDebugFilter(),",e),this.filter=e,this.debug_level1=!0}),o(a,"ifDebug",function(e){var t=this;return t.filter?!(!t.passDebugFilter()||!t[e])||void 0:t[e]}),o(a,"passDebugFilter",function(){var e=this;if(e.debug_element&&e.debug_element.id.indexOf(e.filter)>-1)return!0;if(e.debug_css_list)for(var t in e.debug_css_list){if(t.indexOf(e.filter)>-1)return!0;if(String(e.debug_css_list[t]).indexOf(e.filter)>-1)return!0}return!1}),o(a,"generateBrowserKeyDictionary",function(){var e=this;console.log("CssManager.generateBrowserKeyDictionary()"),e.deviceKeyDict={};var t=document.createElement("div").style;for(var n in t){var i=e.getPrefix(n),o=e.standardizeKey(n);switch(r.a.browser){case"safari":"webkit"==i?e.deviceKeyDict[o]=e.prependPrefix("webkit",o):e.prependPrefix("webkit",o)in t||(e.deviceKeyDict[o]=o);break;case"firefox":var a=e.prependPrefix("Moz",o),s=e.prependPrefix("Webkit",o);o in t?e.deviceKeyDict[o]=o:"moz"==i?e.camelateKey("webkit-"+o)in t&&(e.deviceKeyDict[o]=a):"webkit"==i&&(a in t||(e.deviceKeyDict[o]=s));break;case"chrome":case"ie":default:o in t?e.deviceKeyDict[o]=o:i&&(e.deviceKeyDict[o]=e.prependPrefix(i,o))}}console.log(" KEY DICTIONARY:",e.deviceKeyDict)}),o(a,"apply",function(e,t){var n=this;n.debug_element=e,n.debug_css_list=t,n.ifDebug("debug_level1")&&console.log("  CssManager.apply()",e.id);var r={};for(var i in t)i.match(/^transform\(/)?r[i]=t[i]:(n.ifDebug("debug_level1")&&console.log("   "+i+": "+t[i]+";"),e.style[n.getDeviceKey(i)]=t[i]);n.applyTransforms(e,r),n.ifDebug("debug_level1")&&console.log("\n\n"),n.debug_element=null,n.debug_css_list=null}),o(a,"conformCssObject",function(e,t){var n=this;n.debug_element=t,n.ifDebug("debug_level1")&&console.log("CssManager.conformCssObject()",e);var r={};if(e)for(var i in e){n.ifDebug("debug_level2")&&console.log("  PARSE( key: "+i+", value: "+e[i]+" )");var o=n.conformKeyValue(i,e[i]);for(var a in o)n.ifDebug("debug_level2")&&console.log("    CONFORMED DECLARATION:",o[a]),r[o[a][0]]=o[a][1]}return n.debug_element=null,r}),o(a,"conformCssString",function(e,t){var n=this;n.debug_element=t,n.ifDebug("debug_level1")&&console.log(" CssManager.conformCssString()");var r={};if(e){var i=e.split(/\s*;\s*/);for(var o in i)if(i[o]){var a=i[o].split(/:(.+)?/);n.ifDebug("debug_level2")&&console.log("  PARSE( key: "+a[0]+", value: "+a[1]+" )");var s=n.conformKeyValue(a[0],a[1]);for(var l in s)n.ifDebug("debug_level2")&&console.log("    CONFORMED DECLARATION:",s[l]),r[s[l][0]]=s[l][1]}}return n.debug_element=null,r}),o(a,"conformCssKeyValue",function(e,t){this.ifDebug("debug_level1")&&console.log(" CssManager.conformCssKeyValue()");var n={};return n[e]=t,this.conformCssObject(n)}),o(a,"applyTransforms",function(e,t){var n=this;n.ifDebug("debug_level1")&&console.log("    - CssManager.applyTransforms(), ",t);var r=new i.a,o=e.style[n.getDeviceKey("transform")].match(/matrix[^\)]+\)/);if(o&&(r.setFromCss(o[0]),n.ifDebug("debug_level2")&&console.log("       existing matrix:",r.data)),"transforms"in e)var a=e.transforms;else a={tx:0,ty:0,rz:0,sx:1,sy:1};var s={};for(var l in t){s[l.match(/\(\s([^\s]+)/)[1]]=t[l]}if(void 0!=s.tx&&(r.data[2]=0),void 0!=s.ty&&(r.data[5]=0),void 0!=s.rz){var c=-a.rz;r.rotate(c*(Math.PI/180)),r.rotate(s.rz*(Math.PI/180)),a.rz=s.rz}if(void 0!=s.sx){c=1/a.sx;r.scale(c,1),r.scale(s.sx,1),a.sx=s.sx}if(void 0!=s.sy){c=1/a.sy;r.scale(1,c),r.scale(1,s.sy),a.sy=s.sy}void 0!=s.tx&&(r.translate(s.tx,0),a.tx=s.tx),void 0!=s.ty&&(r.translate(0,s.ty),a.ty=s.ty),e.transforms=a,n.ifDebug("debug_level2")&&console.log("       updated matrix:",r.data),e.style[n.getDeviceKey("transform")]=r.getCss()}),o(a,"conformKeyValue",function(e,t){e=String(e).trim(),t=String(t).trim();var n=this.standardizeKey(e);return this.conformValue(n,t)}),o(a,"hasPrefix",function(e){return e.search(this.matchPrefixRegex())>-1}),o(a,"getPrefix",function(e){var t=e.match(this.matchPrefixRegex());return t?t[1].replace(/-/g,"").toLowerCase():null}),o(a,"stripPrefix",function(e){var t=e.replace(this.matchPrefixRegex(),"");return t.charAt(0).toLowerCase()+t.slice(1)}),o(a,"getDeviceKey",function(e){return e in this.deviceKeyDict?this.deviceKeyDict[e]:e}),o(a,"prependPrefix",function(e,t){return e+t.replace(/^(.)/,function(e){return e.charAt(0).toUpperCase()})}),o(a,"standardizeKey",function(e){var t=this;return e=(e=t.stripPrefix(e))in t.keyFormatExceptions()?t.keyFormatExceptions()[e]:t.camelateKey(e),t.ifDebug("debug_level2")&&console.log('    - result: "'+e+'"'),e}),o(a,"camelateKey",function(e){return e=e.replace(/-(.)/g,function(e){return e.charAt(1).toUpperCase()})}),o(a,"keyFormatExceptions",function(){return{x:"transform( tx )",translateX:"transform( tx )",y:"transform( ty )",translateY:"transform( ty )",rotate:"transform( rz )",rotation:"transform( rz )",scaleX:"transform( sx )",scaleY:"transform( sy )",scale:"transform( sx ),transform( sy )"}}),o(a,"conformValue",function(e,t){var n,r=this,i=[],o=t.match(/\s/),a=t.match(r.matchNumberRegex());if(!o&&a){r.ifDebug("debug_level2")&&console.log("   conform value as number"),n=Number(a[0]);var s=t.match(/[^0-9\.]+$/);if(s)n+=s[0];else switch(e){case"top":case"right":case"bottom":case"left":case"width":case"height":case"fontSize":case"lineHeight":case"padding":case"margin":case"marginRight":case"marginLeft":case"marginTop":case"marginBottom":case"borderRadius":case"borderWidth":case"letterSpacing":n+="px"}}else if("backgroundImage"==e)r.ifDebug("debug_level2")&&console.log("   conform value as background image"),n='url( "'+(t=t.replace(/^url\(\s*['"]*/,"").replace(/['"]*\s*\)$/,""))+'" )';else if("transform"==e){r.ifDebug("debug_level2")&&console.log('   convert "transform" functions to individual transforms');for(var l=/([a-z0-9]+)\(([^\)]+)\)/gi;params=l.exec(t);){var c=params[2].replace(/\s/g,"").split(",").map(function(e,t,n){return Number(e.match(r.matchNumberRegex())[0])});switch(params[1]){case"translate":i.push(["transform( tx )",c[0]]),i.push(["transform( ty )",c[1]]);break;case"translateX":i.push(["transform( tx )",c[0]]);break;case"translateY":i.push(["transform( ty )",c[0]]);break;case"rotate":i.push(["transform( rz )",c[0]]);break;case"scale":i.push(["transform( sx )",c[0]]),i.push(["transform( sy )",c[1]]);break;case"scaleX":i.push(["transform( sx )",c[0]]);break;case"scaleY":i.push(["transform( sy )",c[0]])}}}else r.ifDebug("debug_level2")&&console.log("   conform value as string"),n=t;if(void 0!=n){r.ifDebug("debug_level2")&&console.log('    - result: "'+n+'"');for(var u=e.split(/\,/),d=0;d<u.length;d++)i.push([u[d],n])}return i}),o(a,"matchNumberRegex",function(){return/^[+-]?[0-9]*\.?[0-9]+/}),o(a,"matchPrefixRegex",function(){return/^-*(moz-*|webkit-*|ms-*|o-)/i}),t.a=a},function(e,t,n){var r;"undefined"!=typeof window?r=window:"undefined"!=typeof self?r=self:(console.warn("Using browser-only version of superagent in non-browser environment"),r=this);var i=n(20),o=n(21),a=n(13),s=n(22),l=n(24);function c(){}var u=t=e.exports=function(e,n){return"function"==typeof n?new t.Request("GET",e).end(n):1==arguments.length?new t.Request("GET",e):new t.Request(e,n)};t.Request=g,u.getXHR=function(){if(!(!r.XMLHttpRequest||r.location&&"file:"==r.location.protocol&&r.ActiveXObject))return new XMLHttpRequest;try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(e){}throw Error("Browser-only version of superagent could not find XHR")};var d="".trim?function(e){return e.trim()}:function(e){return e.replace(/(^\s*|\s*$)/g,"")};function h(e){if(!a(e))return e;var t=[];for(var n in e)p(t,n,e[n]);return t.join("&")}function p(e,t,n){if(null!=n)if(Array.isArray(n))n.forEach(function(n){p(e,t,n)});else if(a(n))for(var r in n)p(e,t+"["+r+"]",n[r]);else e.push(encodeURIComponent(t)+"="+encodeURIComponent(n));else null===n&&e.push(encodeURIComponent(t))}function f(e){for(var t,n,r={},i=e.split("&"),o=0,a=i.length;o<a;++o)-1==(n=(t=i[o]).indexOf("="))?r[decodeURIComponent(t)]="":r[decodeURIComponent(t.slice(0,n))]=decodeURIComponent(t.slice(n+1));return r}function _(e){return/[\/+]json($|[^-\w])/.test(e)}function m(e){this.req=e,this.xhr=this.req.xhr,this.text="HEAD"!=this.req.method&&(""===this.xhr.responseType||"text"===this.xhr.responseType)||void 0===this.xhr.responseType?this.xhr.responseText:null,this.statusText=this.req.xhr.statusText;var t=this.xhr.status;1223===t&&(t=204),this._setStatusProperties(t),this.header=this.headers=function(e){for(var t,n,r,i,o=e.split(/\r?\n/),a={},s=0,l=o.length;s<l;++s)-1!==(t=(n=o[s]).indexOf(":"))&&(r=n.slice(0,t).toLowerCase(),i=d(n.slice(t+1)),a[r]=i);return a}(this.xhr.getAllResponseHeaders()),this.header["content-type"]=this.xhr.getResponseHeader("content-type"),this._setHeaderProperties(this.header),null===this.text&&e._responseType?this.body=this.xhr.response:this.body="HEAD"!=this.req.method?this._parseBody(this.text?this.text:this.xhr.response):null}function g(e,t){var n=this;this._query=this._query||[],this.method=e,this.url=t,this.header={},this._header={},this.on("end",function(){var e,t=null,r=null;try{r=new m(n)}catch(e){return(t=new Error("Parser is unable to parse the response")).parse=!0,t.original=e,n.xhr?(t.rawResponse=void 0===n.xhr.responseType?n.xhr.responseText:n.xhr.response,t.status=n.xhr.status?n.xhr.status:null,t.statusCode=t.status):(t.rawResponse=null,t.status=null),n.callback(t)}n.emit("response",r);try{n._isResponseOK(r)||(e=new Error(r.statusText||"Unsuccessful HTTP response"))}catch(t){e=t}e?(e.original=t,e.response=r,e.status=r.status,n.callback(e,r)):n.callback(null,r)})}function v(e,t,n){var r=u("DELETE",e);return"function"==typeof t&&(n=t,t=null),t&&r.send(t),n&&r.end(n),r}u.serializeObject=h,u.parseString=f,u.types={html:"text/html",json:"application/json",xml:"text/xml",urlencoded:"application/x-www-form-urlencoded",form:"application/x-www-form-urlencoded","form-data":"application/x-www-form-urlencoded"},u.serialize={"application/x-www-form-urlencoded":h,"application/json":JSON.stringify},u.parse={"application/x-www-form-urlencoded":f,"application/json":JSON.parse},s(m.prototype),m.prototype._parseBody=function(e){var t=u.parse[this.type];return this.req._parser?this.req._parser(this,e):(!t&&_(this.type)&&(t=u.parse["application/json"]),t&&e&&(e.length||e instanceof Object)?t(e):null)},m.prototype.toError=function(){var e=this.req,t=e.method,n=e.url,r="cannot "+t+" "+n+" ("+this.status+")",i=new Error(r);return i.status=this.status,i.method=t,i.url=n,i},u.Response=m,i(g.prototype),o(g.prototype),g.prototype.type=function(e){return this.set("Content-Type",u.types[e]||e),this},g.prototype.accept=function(e){return this.set("Accept",u.types[e]||e),this},g.prototype.auth=function(e,t,n){1===arguments.length&&(t=""),"object"==typeof t&&null!==t&&(n=t,t=""),n||(n={type:"function"==typeof btoa?"basic":"auto"});return this._auth(e,t,n,function(e){if("function"==typeof btoa)return btoa(e);throw new Error("Cannot use basic auth, btoa is not a function")})},g.prototype.query=function(e){return"string"!=typeof e&&(e=h(e)),e&&this._query.push(e),this},g.prototype.attach=function(e,t,n){if(t){if(this._data)throw Error("superagent can't mix .send() and .attach()");this._getFormData().append(e,t,n||t.name)}return this},g.prototype._getFormData=function(){return this._formData||(this._formData=new r.FormData),this._formData},g.prototype.callback=function(e,t){if(this._shouldRetry(e,t))return this._retry();var n=this._callback;this.clearTimeout(),e&&(this._maxRetries&&(e.retries=this._retries-1),this.emit("error",e)),n(e,t)},g.prototype.crossDomainError=function(){var e=new Error("Request has been terminated\nPossible causes: the network is offline, Origin is not allowed by Access-Control-Allow-Origin, the page is being unloaded, etc.");e.crossDomain=!0,e.status=this.status,e.method=this.method,e.url=this.url,this.callback(e)},g.prototype.buffer=g.prototype.ca=g.prototype.agent=function(){return console.warn("This is not supported in browser version of superagent"),this},g.prototype.pipe=g.prototype.write=function(){throw Error("Streaming is not supported in browser version of superagent")},g.prototype._isHost=function(e){return e&&"object"==typeof e&&!Array.isArray(e)&&"[object Object]"!==Object.prototype.toString.call(e)},g.prototype.end=function(e){return this._endCalled&&console.warn("Warning: .end() was called twice. This is not supported in superagent"),this._endCalled=!0,this._callback=e||c,this._finalizeQueryString(),this._end()},g.prototype._end=function(){var e=this,t=this.xhr=u.getXHR(),n=this._formData||this._data;this._setTimeouts(),t.onreadystatechange=function(){var n=t.readyState;if(n>=2&&e._responseTimeoutTimer&&clearTimeout(e._responseTimeoutTimer),4==n){var r;try{r=t.status}catch(e){r=0}if(!r){if(e.timedout||e._aborted)return;return e.crossDomainError()}e.emit("end")}};var r=function(t,n){n.total>0&&(n.percent=n.loaded/n.total*100),n.direction=t,e.emit("progress",n)};if(this.hasListeners("progress"))try{t.onprogress=r.bind(null,"download"),t.upload&&(t.upload.onprogress=r.bind(null,"upload"))}catch(e){}try{this.username&&this.password?t.open(this.method,this.url,!0,this.username,this.password):t.open(this.method,this.url,!0)}catch(e){return this.callback(e)}if(this._withCredentials&&(t.withCredentials=!0),!this._formData&&"GET"!=this.method&&"HEAD"!=this.method&&"string"!=typeof n&&!this._isHost(n)){var i=this._header["content-type"],o=this._serializer||u.serialize[i?i.split(";")[0]:""];!o&&_(i)&&(o=u.serialize["application/json"]),o&&(n=o(n))}for(var a in this.header)null!=this.header[a]&&this.header.hasOwnProperty(a)&&t.setRequestHeader(a,this.header[a]);return this._responseType&&(t.responseType=this._responseType),this.emit("request",this),t.send(void 0!==n?n:null),this},u.agent=function(){return new l},["GET","POST","OPTIONS","PATCH","PUT","DELETE"].forEach(function(e){l.prototype[e.toLowerCase()]=function(t,n){var r=new u.Request(e,t);return this._setDefaults(r),n&&r.end(n),r}}),l.prototype.del=l.prototype.delete,u.get=function(e,t,n){var r=u("GET",e);return"function"==typeof t&&(n=t,t=null),t&&r.query(t),n&&r.end(n),r},u.head=function(e,t,n){var r=u("HEAD",e);return"function"==typeof t&&(n=t,t=null),t&&r.query(t),n&&r.end(n),r},u.options=function(e,t,n){var r=u("OPTIONS",e);return"function"==typeof t&&(n=t,t=null),t&&r.send(t),n&&r.end(n),r},u.del=v,u.delete=v,u.patch=function(e,t,n){var r=u("PATCH",e);return"function"==typeof t&&(n=t,t=null),t&&r.send(t),n&&r.end(n),r},u.post=function(e,t,n){var r=u("POST",e);return"function"==typeof t&&(n=t,t=null),t&&r.send(t),n&&r.end(n),r},u.put=function(e,t,n){var r=u("PUT",e);return"function"==typeof t&&(n=t,t=null),t&&r.send(t),n&&r.end(n),r}},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";e.exports=function(e){return null!==e&&"object"==typeof e}},function(e,t,n){"use strict";(function(e){}).call(this,n(12))},function(e,t,n){"use strict";(function(e){n(6),n(10),n(8)}).call(this,n(12))},function(module,__webpack_exports__,__webpack_require__){"use strict";var superagent__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(11),superagent__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(superagent__WEBPACK_IMPORTED_MODULE_0__),ad_particles__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(17),ad_geom__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(1),ad_utils__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(0),_globalSetting__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(3),_data_index__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(18),_utils_Dom__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(5),ad_control__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(2);function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Interface=function(){function Interface(){var _this2=this;_defineProperty(this,"buildInterface",function(){_this2.createPS(),_this2.guiInterfaces=[],_this2.psControl=_this2.generateControl(_this2.data.emitterPhysics),_this2.genertateInterface(_this2.data.emitterPhysics,_this2.psControl),_this2.styleControl=_this2.generateControl(_this2.data.styleAnimation),_this2.genertateInterface(_this2.data.styleAnimation,_this2.styleControl),_this2.activeModels=[];var e=_this2.generateParticleModelData();_this2.modelControl=_this2.generateControl(e),_this2.modelGui=_this2.genertateInterface(e,_this2.modelControl),_this2.actionControl=_this2.generateControl(_this2.data.actions),_this2.genertateInterface(_this2.data.actions,_this2.actionControl),_this2.interfaceContainer=document.querySelectorAll(".ac")[0],_this2.blockGuide=document.querySelector("#block-guide"),_this2.codeDisplay=document.querySelector("#code-display"),_this2.codeDisplayText=document.querySelector("#code-display-text"),_this2.codeClose=document.querySelector("#code-close"),_this2.saveFile=document.querySelector("#save"),_this2.velGuide=document.querySelector("#velocity-guide"),_this2.velGuideCtx=_this2.velGuide.getContext("2d"),_this2.forceGuide=document.querySelector("#force-guide"),_this2.forceGuideCtx=_this2.forceGuide.getContext("2d"),_utils_Dom__WEBPACK_IMPORTED_MODULE_6__.a.setGroupStyle([_this2.velGuide,_this2.forceGuide],{left:_this2.adWidth/2-60+"px",top:_this2.adHeight/2-60+"px"}),_this2.saveFile.addEventListener("click",_this2.writeCode,!1),_this2.codeClose.addEventListener("click",function(){_this2.codeDisplay.classList.remove("show","show-message")},!1),_this2.createMoveBtn(),_this2.createHelpBtn()}),_defineProperty(this,"createMoveBtn",function(){_this2.interfaceOffset=new ad_geom__WEBPACK_IMPORTED_MODULE_2__.c(0,0),_this2.moveBtn=document.createElement("div"),_this2.moveBtn.id="move-btn",_this2.interfaceContainer.appendChild(_this2.moveBtn),_this2.moveBtn.addEventListener("mousedown",function(e){_this2.dragging=!0,_this2.draggingStart=new ad_geom__WEBPACK_IMPORTED_MODULE_2__.c(e.clientX,e.clientY)}),document.body.addEventListener("mousemove",function(e){if(_this2.dragging){_this2.draggingOffset=new ad_geom__WEBPACK_IMPORTED_MODULE_2__.c(e.clientX,e.clientY).sub(_this2.draggingStart),_this2.interfaceOffset.add(_this2.draggingOffset);var t=_this2.interfaceOffset.y+"px",n=-1*_this2.interfaceOffset.x+"px";_this2.interfaceContainer.style.top=t,_this2.interfaceContainer.style.right=n,_this2.draggingStart=new ad_geom__WEBPACK_IMPORTED_MODULE_2__.c(e.clientX,e.clientY)}}),document.body.addEventListener("mouseup",function(e){_this2.dragging=!1})}),_defineProperty(this,"createHelpBtn",function(){var e=document.createElement("a");e.id="help-btn",e.href="https://confluence.ff0000.com/display/AT/PARTICLES",e.target="_blank",_this2.interfaceContainer.appendChild(e)}),_defineProperty(this,"createPS",function(){_this2.canvasEl=document.querySelector("#canvas-el"),_this2.canvasEl.style.width=_this2.adWidth+"px",_this2.canvasEl.style.height=_this2.adHeight+"px",_this2.canvasEl.width=_this2.adWidth,_this2.canvasEl.height=_this2.adHeight;var e={emitterData:window.selectedEmitterData,fps:_this2.fps};_this2.PS=new ad_particles__WEBPACK_IMPORTED_MODULE_1__.a,_this2.PS.init(_this2.canvasEl,e),_this2.PS.emit()}),_defineProperty(this,"getPSProp",function(e,t){if("action"===t)return _this2.PS[e]||null;var n=_this2.PS.get(e);return void 0===n?null:n}),_defineProperty(this,"publishCode",function(){var e=_this2.PS.properties,t="";e.background.image&&(t+="import '@size/images/"+ad_control__WEBPACK_IMPORTED_MODULE_7__.b.get(e.background.image).src.split("images/")[1]+"'\n");for(var n=0;n<e.particleModels.length;n++){if("Image"==e.particleModels[n].type)t+="import '@size/images/"+ad_control__WEBPACK_IMPORTED_MODULE_7__.b.get(e.particleModels[n].image).src.split("images/")[1]+"'\n"}t+="export default ",t+=JSON.stringify(e,null,2),_this2.codeDisplayText.value=t,_this2.codeDisplay.classList.add("show")}),_defineProperty(this,"writeCode",function(){var e="";_this2.PS.properties.background.image&&(e+="import '@size/images/"+ad_control__WEBPACK_IMPORTED_MODULE_7__.b.get(_this2.PS.properties.background.image).src.split("images/")[1]+"'\n");for(var t=0;t<_this2.PS.properties.particleModels.length;t++){if("Image"==_this2.PS.properties.particleModels[t].type)e+="import '@size/images/"+ad_control__WEBPACK_IMPORTED_MODULE_7__.b.get(_this2.PS.properties.particleModels[t].image).src.split("images/")[1]+"'\n"}var n=e+"export default "+JSON.stringify(_this2.PS.properties,null,2),r=Object(_globalSetting__WEBPACK_IMPORTED_MODULE_4__.a)("adWidth")+"x"+Object(_globalSetting__WEBPACK_IMPORTED_MODULE_4__.a)("adHeight");superagent__WEBPACK_IMPORTED_MODULE_0___default.a.post("/ad-es6-particles/api/").send({action:"writeData",size:r,data:n,fileName:_this2.selectedEmitterDataName}).end(function(e,t){if(e)alert("Erro with API. Unable to save the fil");else{var n=JSON.parse(t.text);document.querySelector("#saved-message").innerHTML=n.stdout,_this2.codeDisplay.classList.add("show-message")}})}),_defineProperty(this,"showDataSelector",function(e){void 0===e&&(e=[]);var t=document.querySelector("#data-options");e.forEach(function(e,n){var r=document.createElement("li");r.innerHTML=e.name,r.classList.add("btn"),t.appendChild(r),r.addEventListener("click",function(){_this2.selectData(n)})}),_this2.dataSelector.classList.add("show")}),_defineProperty(this,"selectData",function(e){var t=_this2.emitterDataFiles[e];_this2.selectedEmitterDataName=t.name,_this2.evalData(t.content),_this2.buildInterface(),_this2.dataSelector.classList.remove("show")}),_defineProperty(this,"evalData",function(data){try{eval("window.selectedEmitterData="+data)}catch(e){alert(e+"\nPlease check your data file")}}),_defineProperty(this,"addParticleModel",function(){var e=_this2,t="model"+_this2.modelIndex,n={name:t,type:"folder",children:_this2.data.getDefaultNewParticleModelData(t)};_this2.activeModels.push(t),_this2.modelIndex++,n.children.forEach(function(t){"object"==typeof t.defaultVal&&(t.defaultVal=JSON.stringify(t.defaultVal,null,1)),e.modelControl[t.name]=t.defaultVal}),_this2.processData(_this2.modelControl,_this2.modelGui,n),_this2.updateEmitterModels()}),_defineProperty(this,"deleteParticleModel",function(e){var t,n=document.querySelector("#"+e);for(n.parentNode.removeChild(n),t=0;t<_this2.activeModels.length;t++)if(_this2.activeModels[t]===e){_this2.activeModels.splice(t,1);break}_this2.updateEmitterModels()}),_defineProperty(this,"generateControl",function(e){var t,n={};for(t=0;t<e.length;t++){var r=e[t];if("folder"===r.type){var i;for(i=0;i<r.children.length;i++){var o=r.children[i],a=_this2.syncWithCurrentData(o);n[o.name]=null===a?o.defaultVal:a,"action"===r.type&&(n[r.name]=n[r.name].bind(_this2.PS))}}else{a=_this2.syncWithCurrentData(r);n[r.name]=null===a?r.defaultVal:a,"action"===r.type&&(n[r.name]=n[r.name].bind(_this2.PS))}}return n}),_defineProperty(this,"generateParticleModelData",function(){var e=_this2;_this2.modelIndex=0;var t,n=_this2.data.particleModel,r=_this2.getPSProp("particleModels");for(t=0;t<r.length;t++){var i="model"+_this2.modelIndex,o=r[t],a={name:i,type:"folder",children:_this2.data.getDefaultNewParticleModelData(i)};a.children.forEach(function(t){o[t.modelKey]&&(t.defaultVal=o[t.modelKey]),"object"==typeof t.defaultVal&&(t.defaultVal=JSON.stringify(t.defaultVal,null,1)),t.name.indexOf("Delete")>-1&&(t.defaultVal=function(t){return function(){e.deleteParticleModel(t)}}(i))}),n.push(a),_this2.activeModels.push(i),_this2.modelIndex++}return n}),_defineProperty(this,"genertateInterface",function(e,t){var n,r=new dat.GUI;for(n=0;n<e.length;n++){var i=e[n];this.processData(t,r,i)}return r}),_defineProperty(this,"processData",function(e,t,n,r){var i;switch(void 0===r&&(r={}),n.type){case"text":case"boolean":case"action":"text"===n.type&&"object"==typeof n.defaultVal&&(n.defaultVal=JSON.stringify(n.defaultVal,null,1)),i=t.add(e,n.name),void 0!==n.min&&i.min(n.min),i.onFinishChange(function(e){window.Interface.setEmitterProperty(n,e,r),"world"===r.name&&_this2.hideGuide(!0)});break;case"color":(i=t.addColor(e,n.name)).onChange(function(e){window.Interface.setEmitterProperty(n,e,r)});break;case"slider":i=t.add(e,n.name,n.range[0],n.range[1]),void 0!==n.step&&i.step(n.step),i.onChange(function(e){window.Interface.setEmitterProperty(n,e,r)}),i.onFinishChange(function(e){switch(r.name){case"world":case"origin":_this2.hideGuide();break;case"velocityAngle":_this2.hideVelocityGuide();break;case"globalForce":_this2.hideForceGuide()}});break;case"dropdown":(i=t.add(e,n.name,n.options)).onFinishChange(function(e){window.Interface.setEmitterProperty(n,e,r),"origin"===r.name&&_this2.hideGuide(!0)});break;case"folder":var o,a=t.addFolder(n.name);for(o=0;o<n.children.length;o++)_this2.processData(e,a,n.children[o],n)}}),_defineProperty(this,"setEmitterProperty",function(e,t,n){if("action"!==e.type){n=n||{};var r,i=e.map||e.name,o=_this2.psControl;switch(n.name){case"world":("worldActive"!==e.name||t)&&_this2.showGuide(o.left,o.top,o.right-o.left,o.bottom-o.top);break;case"origin":var a=o.originXRange/2,s=o.originYRange/2,l=o.originX-a,c=o.originY-s;_this2.showGuide(l,c,o.originX+a-l,o.originY+s-c,o.originShape);break;case"velocityAngle":var u=o.angleRange/2;_this2.showVelocityGuide(o.angleValue-u,o.angleValue+u);break;case"globalForce":_this2.showForceGuide(o.forceAngle)}if("string"==typeof t)if("["===(r=t.replace(/\s+/g,""))[0]&&"]"===r[r.length-1]){var d,h=(r=(r=r.substr(1)).slice(0,r.length-1)).split(",{"),p=[];for(d=0;d<h.length;d++){var f=h[d];if(0!==d&&(f="{"+f),0!==f.trim().length)try{p.push(JSON.parse(f))}catch(e){return void alert("This is not a valid input.")}}t=p}0===(r=n.name||"").indexOf("model")?_this2.updateEmitterModels():_this2.PS.set(i,t)}}),_defineProperty(this,"syncWithCurrentData",function(e){var t=e.map||e.name,n=null;switch(e.name){case"bgImage":n=_this2.getPSProp("background.image")||_this2.images[0]||"",_this2.PS.set("background.image",n);break;default:n=_this2.getPSProp(t,e.type)}if("object"==typeof n&&null!==n){var r,i="[\n";for(r=0;r<n.length;r++)i+=" ",i+=JSON.stringify(n[r]),r<n.length-1&&(i+=", ",i+="\n");n=i+="\n]"}return void 0===n&&(n=null),n}),_defineProperty(this,"showGuide",function(e,t,n,r,i){var o={left:e+"px",top:t+"px",width:n+"px",height:r+"px"};_utils_Dom__WEBPACK_IMPORTED_MODULE_6__.a.setStyle(_this2.blockGuide,o),_utils_Dom__WEBPACK_IMPORTED_MODULE_6__.a.addClass(_this2.blockGuide,"show"),"oval"===i&&_utils_Dom__WEBPACK_IMPORTED_MODULE_6__.a.addClass(_this2.blockGuide,"oval")}),this.adWidth=Object(_globalSetting__WEBPACK_IMPORTED_MODULE_4__.a)("adWidth"),this.adHeight=Object(_globalSetting__WEBPACK_IMPORTED_MODULE_4__.a)("adHeight"),this.fps=Object(_globalSetting__WEBPACK_IMPORTED_MODULE_4__.a)("fps"),this.emitterDataFiles=Object(_globalSetting__WEBPACK_IMPORTED_MODULE_4__.a)("emitterDataFiles"),this.images=Object(_globalSetting__WEBPACK_IMPORTED_MODULE_4__.a)("loadedImageNames"),this.data=Object(_data_index__WEBPACK_IMPORTED_MODULE_5__.a)(this),this.emitterDataFiles.length>1?(this.dataSelector=document.querySelector("#data-selector"),this.showDataSelector(this.emitterDataFiles)):(this.evalData(this.emitterDataFiles[0].content),this.selectedEmitterDataName=this.emitterDataFiles[0].name,this.buildInterface())}var _proto=Interface.prototype;return _proto.updateEmitterModels=function(){var e,t=[],n=this.modelControl;for(e=0;e<this.activeModels.length;e++){var r=this.activeModels[e],i={};i.type=n[r+"Type"],i.id=n[r+"Id"],i.width=n[r+"Width"],"Image"===i.type&&(i.image=n[r+"ImageName"]),"Sprite"===i.type&&(i.image=n[r+"ImageName"],i.spriteSetting=JSON.parse(n[r+"SpriteSetting"])),"Rect"===i.type&&(i.height=n[r+"Height"]),i.probability=n[r+"Probability"],i.properties=JSON.parse(n[r+"Props"]),t.push(i)}this.PS.set("particleModels",t)},_proto.hideGuide=function(e){var t=this;setTimeout(function(){_utils_Dom__WEBPACK_IMPORTED_MODULE_6__.a.removeClass(t.blockGuide,"show"),_utils_Dom__WEBPACK_IMPORTED_MODULE_6__.a.removeClass(t.blockGuide,"oval")},e?500:0)},_proto.showVelocityGuide=function(e,t){_utils_Dom__WEBPACK_IMPORTED_MODULE_6__.a.addClass(this.velGuide,"show");var n=this.velGuideCtx,r=new ad_geom__WEBPACK_IMPORTED_MODULE_2__.c(60,60);ad_geom__WEBPACK_IMPORTED_MODULE_2__.c.degreeToVector(e),ad_geom__WEBPACK_IMPORTED_MODULE_2__.c.degreeToVector(t);n.clearRect(0,0,120,120),n.beginPath(),n.moveTo(r.x,r.y),n.arc(r.x,r.y,60,0,2*Math.PI),n.lineTo(r.x,r.y),n.fillStyle="rgba( 255, 255, 255, .4 )",n.fill(),n.closePath(),n.beginPath(),n.moveTo(r.x,r.y),n.arc(r.x,r.y,58,ad_utils__WEBPACK_IMPORTED_MODULE_3__.b.toRadians(e),ad_utils__WEBPACK_IMPORTED_MODULE_3__.b.toRadians(t)),n.lineTo(r.x,r.y),n.strokeStyle="rgba( 0, 0, 0, .5 )",n.fillStyle="rgba( 0, 200, 255, .4 )",n.lineWidth=2,n.fill(),n.stroke(),n.closePath()},_proto.showForceGuide=function(e){_utils_Dom__WEBPACK_IMPORTED_MODULE_6__.a.addClass(this.forceGuide,"show");var t=this.forceGuideCtx,n=new ad_geom__WEBPACK_IMPORTED_MODULE_2__.c(60,60),r=ad_geom__WEBPACK_IMPORTED_MODULE_2__.c.degreeToVector(e);r.mult(60),r.add(n),t.clearRect(0,0,120,120),t.beginPath(),t.arc(n.x,n.y,60,0,2*Math.PI),t.strokeStyle="rgba( 0, 0, 0, 0)",t.fillStyle="rgba( 255, 255, 255, 0.3 )",t.fill(),t.stroke(),t.closePath(),t.beginPath(),t.arc(n.x,n.y,5,0,2*Math.PI),t.moveTo(n.x,n.y),t.lineTo(r.x,r.y),t.strokeStyle="rgba( 0, 0, 0, 1 )",t.fillStyle="rgba( 255, 255, 255, .4 )",t.lineWidth=2,t.fill(),t.stroke(),t.closePath()},_proto.hideVelocityGuide=function(){_utils_Dom__WEBPACK_IMPORTED_MODULE_6__.a.removeClass(this.velGuide,"show")},_proto.hideForceGuide=function(){_utils_Dom__WEBPACK_IMPORTED_MODULE_6__.a.removeClass(this.forceGuide,"show")},Interface}();__webpack_exports__.a=Interface},function(e,t,n){"use strict";var r,i,o=n(1),a=n(7),s=n(0),l=n(2),c={easyTween:function(e,t,n){var r={};for(var i in e){var o,a=e[i],l=a.steps,c="max"===a.duration?t:a.duration||t,u=a.loop?n%c/c:n/c;for(u=s.b.restrict(u,0,1),o=0;o<l.length-1;o++){var d=l[o],h=l[o+1];if(s.b.inRange(u,d.s,h.s)){var p=s.b.rel(d.v,h.v,d.s,h.s,u);r[i]=p;break}}}return r},randomNumInRange:function(e,t,n){return t?(n=n||.01,e+s.b.random(-t/2,t/2,n)):e},randomArrayInRange:function(e,t,n){n=n||.01;var r,i=[];for(r=0;r<e.length;r++)i.push(this.randomNumInRange(e[r],t[r],n));return i},randomVectorInRange:function(e,t,n){var r=new o.c(e.x,e.y),i=t.x/2,a=t.y/2;switch(n){case"rect":var l=s.b.random(-i,i,.01),c=s.b.random(-a,a,.01);u=new o.c(l,c);break;case"oval":default:var u;(u=o.c.random()).x*=i*Math.random(),u.y*=a*Math.random()}return r.add(u),r},secToFrameCount:function(e,t){return~~(e*t)},frameCountToSec:function(e,t){return e/t}};function u(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var d={DEFAULTSIZE:10,DEFAULTSTYLE:{x:0,y:0,alpha:1,scale:1,rotation:0,transformOrigin:{x:.5,y:.5},color:[255,0,0],strokeWidth:0,strokeColor:"rgba(0, 0, 0, 1)"}};d.Shape=(i=r=function(){function e(){this.hasPath=!0}return e.prototype.render=function(e,t,n){void 0===t&&(t={}),void 0===n&&(n=0),(t=s.c.defaults(t,this.style)).scale=s.b.restrict(t.scale,0,1/0),t.alpha=s.b.restrict(t.alpha,0,1);var r=this.width*t.scale,i=this.height*t.scale;if(t.color=d.Shape.getRGBA(t.color,t.alpha),e.save(),t.alpha<1&&!this.hasPath&&(e.globalAlpha=t.alpha),e.translate(r*-t.transformOrigin.x,i*-t.transformOrigin.y),0!==t.rotation){var o=t.x+r*t.transformOrigin.x,a=t.y+i*t.transformOrigin.y;e.translate(o,a),e.rotate(s.b.toRadians(t.rotation)),e.translate(-o,-a)}this.hasPath&&e.beginPath(),this.draw(e,t,r,i,n),this.hasPath&&(e.closePath(),e.fillStyle=t.color,e.fill(),t.strokeWidth>0&&(e.lineWidth=t.strokeWidth,e.strokeStyle=t.strokeColor,e.stroke())),e.restore()},e}(),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(r,"getRGBA",function(e,t){return"rgba("+~~s.b.restrict(e[0],0,255)+","+~~s.b.restrict(e[1],0,255)+","+~~s.b.restrict(e[2],0,255)+","+s.b.restrict(t,0,1)+")"}),i),d.Image=function(e){function t(t,n,r){var i;return void 0===n&&(n=t.width),void 0===r&&(r={}),(i=e.call(this)||this).hasPath=!1,i.image=t,i.width=n,i.height=i.width*(t.height/t.width),i.style=s.c.defaults(r,d.DEFAULTSTYLE),i}return u(t,e),t.prototype.draw=function(e,t,n,r){e.drawImage(this.image,t.x,t.y,n,r)},t}(d.Shape),d.Circle=function(e){function t(t,n){var r;return void 0===t&&(t=d.DEFAULTSIZE),void 0===n&&(n={}),(r=e.call(this)||this).width=.5*t,r.height=r.width,r.style=s.c.defaults(n,d.DEFAULTSTYLE),r}return u(t,e),t.prototype.draw=function(e,t,n){e.arc(t.x+.5*n,t.y+.5*n,n,0,2*Math.PI)},t}(d.Shape),d.Rect=function(e){function t(t,n,r){var i;return void 0===t&&(t=d.DEFAULTSIZ),void 0===n&&(n=d.DEFAULTSIZ),void 0===r&&(r={}),(i=e.call(this)||this).width=t,i.height=n,i.style=s.c.defaults(r,d.DEFAULTSTYLE),i}return u(t,e),t.prototype.draw=function(e,t,n,r){e.rect(t.x,t.y,n,r)},t}(d.Shape),d.Sprite=function(e){function t(t,n,r,i){var o;return void 0===r&&(r={}),(o=e.call(this)||this).hasPath=!1,o.setting=i,o.image=t,o.oriWidth=t.width,o.oriHeight=t.height,o.width=n||o.oriWidth,o.height=o.width*(o.setting.frameWidth/o.setting.frameHeight),o.style=s.c.defaults(r,d.DEFAULTSTYLE),o.frameLen=~~(1/o.setting.speed),o.colNumber=o.oriWidth/o.setting.frameWidth,o}return u(t,e),t.prototype.draw=function(e,t,n,r,i){var o=~~(i/this.frameLen);if(this.setting.loop)o%=this.setting.frameNumber;else{var a=this.setting.frameNumber-1;o=o>a?a:o}var s=this.setting.frameWidth,l=this.setting.frameHeight,c=n/s,u=o*this.setting.frameWidth%this.oriWidth,d=~~(o/this.colNumber)*this.setting.frameHeight;e.drawImage(this.image,u,d,s,l,t.x,t.y,s*c,l*c)},t}(d.Shape);var h=d,p=0,f=function(e,t){var n=this;n.graphic=e,n.originalProperties=t||{},n.defaultProperties={},n.properties=n.originalProperties,n.setDefaultProperties=function(e){n.defaultProperties=e,n.properties=s.c.defaults(n.originalProperties,e,!0)},n.generateIndividualProperties=function(){var e=c,t=function(t){return e.randomNumInRange(t.value,t.range)},r=n.properties,i=o.c.degreeToVector(t(r.velocityAngle)),a=t(r.scale),s=t(r.speed),l=e.randomVectorInRange(r.origin.value,r.origin.range,r.origin.shape),u={id:p,lifeSpan:t(r.lifeSpan),location:l,velocity:i.mult(s),turbulence:r.turbulence,maxSpeed:r.maxSpeed,acceleration:r.acceleration,bounceAmount:r.bounceAmount,bodySize:n._getBodySize(a),style:{x:location.x,y:location.y,alpha:t(r.alpha),scale:a,rotation:t(r.rotation),transformOrigin:r.transformOrigin,color:c.randomArrayInRange(r.color.value,r.color.range)},animations:r.animations};return p++,u},n._getBodySize=function(e){return void 0!==n.properties.bodySize?n.properties.bodySize*e:n.graphic instanceof h.Circle?n.graphic.width*e:Math.max(n.graphic.width,n.graphic.height)*e*.5}},_=function(e,t,n){var r=this;r.fps=n,r.graphic=t.graphic,r.properties=t.generateIndividualProperties(),r.frameCount=0,r.ctx=e,r._lifeSpanFrameCount=c.secToFrameCount(r.properties.lifeSpan,r.fps),r._force=new o.c(0,0),r._hasAnimation=function(){var e=r.properties.animations;for(var t in e)if(e[t].steps.length>0)return!0;return!1}.bind(r)(),r._hasTurbulence=function(){var e=r.properties.turbulence;return 0!==e.rate&&0!==e.x&&0!==e.y}.bind(r)()};_.prototype={update:function(){var e=this.properties;e.velocity.clone();if(e.velocity.mult(1+e.acceleration),e.velocity.add(this._force),e.velocity.limit(e.maxSpeed),e.location.add(e.velocity),this._force.mult(0),this._hasTurbulence){this.noiseStart||(this.noiseStart=new o.c.random,this.noiseStart.mult(250));var t=e.turbulence;this.noiseStart.add(new o.c(t.rate,t.rate));var n=o.b.get(this.noiseStart.x,this.noiseStart.y);e.location.x+=n.x*t.xAmplitude,e.location.y+=n.y*t.yAmplitude}e.style.x=e.location.x,e.style.y=e.location.y,this.frameCount++},getAnimationStyle:function(){var e=this.properties,t={},n=c.frameCountToSec(this.frameCount,this.fps),r=c.easyTween(e.animations,e.lifeSpan,n);for(var i in e.style)if(void 0!==r[i]){var o=e.style[i]*r[i];t[i]=o}else t[i]=e.style[i];return t},render:function(){var e=this._hasAnimation?this.getAnimationStyle():this.properties.style;this.graphic.render(this.ctx,e,this.frameCount)},applyForce:function(e){this._force.add(e)},isDead:function(e,t,n){var r=this.properties;if(this._lifeSpanFrameCount-this.frameCount<=0)return!0;if(n){var i=r.location,o=this.graphic,a=Math.max(o.width,o.height)*r.style.scale;if(i.x-a>e||i.y-a>t||i.x+a<0||i.y+a<0)return!0}return!1},checkWorld:function(e){var t=this.properties.location,n=this.properties.bodySize,r=e[0]+n,i=e[1]-n,o=e[2]+n,a=e[3]-n;t.x<=r?this._checkBorder("x",r):t.x>=i&&this._checkBorder("x",i),t.y<=o?this._checkBorder("y",o):t.y>=a&&this._checkBorder("y",a)},_checkBorder:function(e,t){var n=this.properties,r=n.velocity,i=n.bounceAmount;"x"===e?(r.x*=-i,r.y*=i,n.location.x=t):(r.x*=i,r.y*=-i,n.location.y=t)}};var m=_,g=function(){var e=this;e.G=new o.c(0,.1),e.customBehaiver={emitter:[],particle:[]},e.init=function(t,n){var r=(n=n||{}).emitterData;e.fps=n.fps||60,e.canvas=t,e.ctx=t.getContext("2d"),e.ctxWidth=t.width,e.ctxHeight=t.height,e.active=!1,e.frameCount=0,e.startEmitFrame=0,e.frameEmittedCount=0,e.liveParticles=[],e.particles=[],e.models=[],e.properties={},e.setProperties(r),e._drawBackground(),a.a.register(e,e._run,e.fps)},e.set=function(t,n,r){r=void 0===r||r,s.c.objectifier.set(t,n,e.properties),r&&e._afterPropertyChanged([t.split(".")[0]])},e.get=function(t){return s.c.objectifier.get(t,e.properties)},e.setProperties=function(t){var n=[];for(var r in t)e.set(r,t[r],!1),n.push(r.split(".")[0]);e._afterPropertyChanged(n)},e.addCustomBehavier=function(e,t){this.customBehaiver[e].push(t)},this.removeCustomBehavier=function(e,t){var n,r=this.customBehaiver[e];for(n=0;n<r.length;n++)r[n]===t&&this.customBehaiver[e].splice(n,1)},e.emit=function(){e.active=!0,e.startEmitFrame=e.frameCount,0===e.properties.emitRate&&e.createParticles(e.properties.emitAmount)},e.stopEmitting=function(){e.active=!1},e.empty=function(){e.particles.forEach(function(e){}),e.particles=[]},e.pause=function(){a.a.unregister(e,e._run)},e.resume=function(){a.a.register(e,e._run,e.fps)},e.tween={},e.tween.to=function(t,n){var r=(n=n||{}).onUpdate||null,i=n.delay||0;return delete n.delay,TweenLite.delayedCall(i,function(){var i={};for(var o in n)void 0!==e.get(o)&&(i[o]=e.get(o));n.onUpdate=function(){r&&r(),e.setProperties(i)},TweenLite.to(i,t,n)})},e.createParticles=function(t){if(e.frameEmittedCount++,!(e.models.length<=0)){var n,r=e.properties,i=e.probabilityMap;for(n=0;n<t;n++){var o,a=e.models;if(e.particles.length>=r.maxParticleAmount)return;if(r.pickRandomModel){var l,c=s.b.random(0,e.totalProbability,.01);for(l=0;l<i.length-1;l++)if(s.b.inRange(c,i[l],i[l+1])){o=l;break}}else o=(e.frameEmittedCount-1)%a.length;e.particles.push(new m(e.ctx,a[o],e.fps))}}},e.addModel=function(t){e.properties.particleModels.push(t),e._afterPropertyChanged(["particleModels"])},e.removeModel=function(t){var n,r=null,i=e.properties.particleModels;for(n=0;n<i.length;n++)if(t===i[n].id){r=n;break}null!==r&&(i.splice(r,1),e._afterPropertyChanged(["particleModels"]))},e._drawBackground=function(){var t=e.properties,n=t.background;if(t.clearCanvas){switch(e.frameCount>0&&(e.ctx.globalAlpha=n.alpha),n.type){case"color":e.ctx.beginPath(),e.ctx.rect(0,0,e.ctxWidth,e.ctxHeight),e.ctx.fillStyle=n.color,e.ctx.fill(),e.ctx.closePath();break;case"image":e.ctx.drawImage(l.b.get(n.image),0,0,e.ctxWidth,e.ctxHeight);break;default:e.ctx.clearRect(0,0,e.ctxWidth,e.ctxHeight)}e.ctx.globalAlpha=1}},e._afterPropertyChanged=function(t){if(void 0===t&&(t=[]),t.indexOf("globalForce")>-1){var n=e.properties.globalForce;e._globalForce=o.c.degreeToVector(n.angle).mult(n.amount)}if(t.indexOf("particleModels")>-1){e.models=[],e.totalProbability=0;for(var r=[],i=e.properties.particleModels,a=0;a<i.length;a++){var s,c,u=i[a];switch(u.type){case"Image":s=new h[u.type](l.b.get(u.image),u.width,u.style);break;case"Sprite":s=new h[u.type](l.b.get(u.image),u.width,u.style,u.spriteSetting);break;case"Circle":s=new h[u.type](u.width,u.style);break;case"Rect":s=new h[u.type](u.width,u.height,u.style)}(c=new f(s,u.properties)).setDefaultProperties(e.properties),e.models.push(c),r.push(e.totalProbability);var d=void 0===u.probability?1:u.probability;e.totalProbability+=d}r.push(e.totalProbability),e.probabilityMap=r}else{var p=e.properties;e.models.forEach(function(e){e.setDefaultProperties(p)})}}.bind(e),e._run=function(){var t,n=e.properties;for(e._drawBackground(),t=0;t<e.particles.length;t++){var r=this.particles[t];if(r.isDead(e.ctxWidth,e.ctxHeight,n.killIfOutOfCanvas))r=null;else{if(e.liveParticles.push(r),r.update(),r.applyForce(e._globalForce),0!==n.gravityAmount){var i=e.G.clone();i.mult(n.gravityAmount),r.applyForce(i)}var o;if(n.world.active&&r.checkWorld(n.world.value),0!==e.customBehaiver.particle)for(o=0;o<e.customBehaiver.particle.length;o++)var a=e.customBehaiver.particle[o].call(a,r,e.particles);r.render()}}if(e.particles=e.liveParticles,e.liveParticles=[],0!==e.customBehaiver.emitter)for(o=0;o<e.customBehaiver.emitter.length;o++)a=e.customBehaiver.emitter[o].call(a,e);e.active&&(e.frameCount-e.startEmitFrame)%~~(1/n.emitRate)==0&&e.createParticles(n.emitAmount),e.frameCount++}};n.d(t,"a",function(){return g})},function(e,t,n){"use strict";var r=function(e){return[{name:"emit",type:"action",defaultVal:function(){e.PS.emit()}},{name:"stopEmitting",type:"action",defaultVal:function(){e.PS.stopEmitting()}},{name:"pause",type:"action",defaultVal:function(){e.PS.pause()}},{name:"resume",type:"action",defaultVal:function(){e.PS.resume()}},{name:"empty",type:"action",defaultVal:function(){e.PS.empty()}},{name:"publishCode",type:"action",defaultVal:function(){e.publishCode()}}]},i=[{name:"pickRandomModel",type:"boolean",defaultVal:!0},{name:"maxParticleAmount",type:"slider",range:[0,1500],defaultVal:300,step:1},{name:"emitRate",type:"slider",range:[0,1],defaultVal:.1,step:.01},{name:"emitAmount",type:"slider",range:[0,50],defaultVal:1,step:1},{name:"killIfOutOfCanvas",type:"boolean",defaultVal:!1},{name:"world",type:"folder",children:[{name:"worldActive",type:"boolean",map:"world.active",defaultVal:!1,step:1},{name:"left",type:"slider",map:"world.value.0",defaultVal:0,range:[-200,1500],step:1},{name:"right",type:"slider",map:"world.value.1",defaultVal:300,range:[-200,1500],step:1},{name:"top",type:"slider",map:"world.value.2",defaultVal:0,range:[-200,1500],step:1},{name:"bottom",type:"slider",map:"world.value.3",defaultVal:300,range:[-500,1500],step:1}]},{name:"gravityAmount",type:"slider",range:[-5,5],defaultVal:.1,step:.01},{name:"bounceAmount",type:"slider",range:[0,.9],defaultVal:.1,step:.01},{name:"globalForce",type:"folder",map:"globalForce",children:[{name:"forceAngle",type:"slider",map:"globalForce.angle",defaultVal:0,range:[0,359],step:1},{name:"forceAmount",type:"slider",map:"globalForce.amount",defaultVal:.05,range:[0,.5],step:.01}]},{name:"origin",type:"folder",children:[{name:"originShape",type:"dropdown",map:"origin.shape",options:["rect","oval"]},{name:"originX",type:"slider",map:"origin.value.x",defaultVal:200,range:[-1e3,1e3]},{name:"originY",type:"slider",map:"origin.value.y",defaultVal:200,range:[-1e3,1e3]},{name:"originXRange",type:"slider",map:"origin.range.x",defaultVal:0,range:[0,1e3]},{name:"originYRange",type:"slider",map:"origin.range.y",defaultVal:0,range:[0,1e3]}]},{name:"life span",type:"folder",children:[{name:"lifeSpanValue",type:"slider",map:"lifeSpan.value",defaultVal:2,range:[.1,60]},{name:"lifeSpanRange",type:"slider",map:"lifeSpan.range",defaultVal:0,range:[0,50]}]},{name:"velocityAngle",type:"folder",children:[{name:"angleValue",type:"slider",map:"velocityAngle.value",defaultVal:.1,range:[0,359],step:1},{name:"angleRange",type:"slider",map:"velocityAngle.range",defaultVal:.1,range:[0,359],step:1}]},{name:"speed",type:"folder",children:[{name:"speedValue",type:"slider",map:"speed.value",defaultVal:1,range:[0,20],step:.1},{name:"speedRange",type:"slider",map:"speed.range",defaultVal:0,range:[0,20],step:.1}]},{name:"acceleration",type:"slider",range:[-.1,.1],defaultVal:.001,step:.01},{name:"maxSpeed",type:"slider",range:[0,50],defaultVal:30,step:.1},{name:"turbulence",type:"folder",children:[{name:"tRate",type:"slider",map:"turbulence.rate",defaultVal:.05,range:[0,.2],step:.01},{name:"xAmplitude",type:"slider",map:"turbulence.xAmplitude",defaultVal:.1,range:[0,10],step:.01},{name:"yAmplitude",type:"slider",map:"turbulence.yAmplitude",defaultVal:.1,range:[0,10],step:.01}]}],o=(n(3),function(e){return[{name:"background",type:"folder",children:[{name:"bgType",type:"dropdown",map:"background.type",defaultVal:"none",options:["none","color","image"]},{name:"bgColor",type:"color",map:"background.color",defaultVal:"#ff0000"},{name:"bgImage",type:"dropdown",map:"background.image",defaultVal:"",options:e.images},{name:"bgAlpha",type:"slider",map:"background.alpha",range:[0,1],defaultVal:1}]},{name:"clearCanvas",type:"boolean",defaultVal:!0},{name:"alpha",type:"folder",children:[{name:"alphaValue",type:"slider",map:"alpha.value",defaultVal:.95,range:[0,1],step:.01},{name:"alphaRange",type:"slider",map:"alpha.range",defaultVal:.15,range:[0,1],step:.01}]},{name:"transformOrigin",type:"folder",children:[{name:"originX",type:"slider",map:"transformOrigin.x",defaultVal:.5,range:[-1,2],step:.01},{name:"originY",type:"slider",map:"transformOrigin.y",defaultVal:.5,range:[-1,2],step:.01}]},{name:"scale",type:"folder",children:[{name:"scaleValue",type:"slider",map:"scale.value",defaultVal:1.5,range:[0,10],step:.01},{name:"scaleRange",type:"slider",map:"scale.range",defaultVal:.15,range:[0,10],step:.01}]},{name:"rotation",type:"folder",children:[{name:"rotationValue",type:"slider",map:"rotation.value",defaultVal:0,range:[-360,360],step:1},{name:"rotationRange",type:"slider",map:"rotation.range",defaultVal:0,range:[0,360],step:1}]},{name:"color",type:"folder",children:[{name:"colorValueR",type:"slider",map:"color.value.0",defaultVal:255,range:[0,255],step:1},{name:"colorValueG",type:"slider",map:"color.value.1",defaultVal:100,range:[0,255],step:1},{name:"colorValueB",type:"slider",map:"color.value.2",defaultVal:100,range:[0,255],step:1},{name:"colorRangeR",type:"slider",map:"color.range.0",defaultVal:255,range:[0,255],step:1},{name:"colorRangeG",type:"slider",map:"color.range.1",defaultVal:100,range:[0,255],step:1},{name:"colorRangeB",type:"slider",map:"color.range.2",defaultVal:100,range:[0,255],step:1}]},{name:"alphaAnimation",type:"folder",children:[{name:"alphaLoop",type:"boolean",map:"animations.alpha.loop",defaultVal:!0},{name:"alphaDuration",type:"text",map:"animations.alpha.duration",defaultVal:"max"},{name:"alphaSteps",type:"text",map:"animations.alpha.steps",defaultVal:""}]},{name:"scaleAnimation",type:"folder",children:[{name:"scaleLoop",type:"boolean",map:"animations.scale.loop",defaultVal:!0},{name:"scaleDuration",type:"text",map:"animations.scale.duration",defaultVal:"max"},{name:"scaleSteps",type:"text",map:"animations.scale.steps",defaultVal:""}]},{name:"rotationAnimation",type:"folder",children:[{name:"rotationLoop",type:"boolean",map:"animations.rotation.loop",defaultVal:!0},{name:"rotationDuration",type:"text",map:"animations.rotation.duration",defaultVal:"max"},{name:"rotationSteps",type:"text",map:"animations.rotation.steps",defaultVal:""}]}]});t.a=function(e){return{actions:r(e),emitterPhysics:i,styleAnimation:o(e),particleModel:function(e){return[{name:"addParticleModel",type:"action",defaultVal:function(){e.addParticleModel()}}]}(e),getDefaultNewParticleModelData:function(e){var t=e.images;return function(n){return[{name:n+"Type",type:"dropdown",defaultVal:"Circle",options:["Image","Circle","Rect","Sprite"],modelKey:"type"},{name:n+"ImageName",type:"dropdown",defaultVal:t[0]||"",options:t,modelKey:"image"},{name:n+"Width",type:"text",defaultVal:10,min:0,modelKey:"width"},{name:n+"Height",type:"text",defaultVal:10,min:0,modelKey:"height"},{name:n+"Probability",type:"slider",range:[.1,50],defaultVal:1,min:.1,modelKey:"probability"},{name:n+"Props",type:"text",defaultVal:"{}",modelKey:"properties"},{name:n+"SpriteSetting",type:"text",defaultVal:{frameWidth:0,frameHeight:0,frameNumber:1,speed:.2,loop:!0},modelKey:"spriteSetting"},{name:n+"Id",type:"text",defaultVal:n,modelKey:"id"},{name:n+"Delete",type:"action",modelKey:null,defaultVal:function(){e.deleteParticleModel(n)}}]}}(e)}}},function(e,t){window.dat=window.dat||{},dat.gui=dat.gui||{},dat.utils=dat.utils||{},dat.controllers=dat.controllers||{},dat.dom=dat.dom||{},dat.color=dat.color||{},dat.utils.css={load:function(e,t){var n=(t=t||document).createElement("link");n.type="text/css",n.rel="stylesheet",n.href=e,t.getElementsByTagName("head")[0].appendChild(n)},inject:function(e,t){t=t||document;var n=document.createElement("style");n.type="text/css",n.innerHTML=e,t.getElementsByTagName("head")[0].appendChild(n)}},dat.utils.common=function(){var e=Array.prototype.forEach,t=Array.prototype.slice;return{BREAK:{},extend:function(e){return this.each(t.call(arguments,1),function(t){for(var n in t)this.isUndefined(t[n])||(e[n]=t[n])},this),e},defaults:function(e){return this.each(t.call(arguments,1),function(t){for(var n in t)this.isUndefined(e[n])&&(e[n]=t[n])},this),e},compose:function(){var e=t.call(arguments);return function(){for(var n=t.call(arguments),r=e.length-1;r>=0;r--)n=[e[r].apply(this,n)];return n[0]}},each:function(t,n,r){if(t)if(e&&t.forEach&&t.forEach===e)t.forEach(n,r);else if(t.length===t.length+0){for(var i=0,o=t.length;i<o;i++)if(i in t&&n.call(r,t[i],i)===this.BREAK)return}else for(var i in t)if(n.call(r,t[i],i)===this.BREAK)return},defer:function(e){setTimeout(e,0)},toArray:function(e){return e.toArray?e.toArray():t.call(e)},isUndefined:function(e){return void 0===e},isNull:function(e){return null===e},isNaN:function(e){return e!=e},isArray:Array.isArray||function(e){return e.constructor===Array},isObject:function(e){return e===Object(e)},isNumber:function(e){return e===e+0},isString:function(e){return e===e+""},isBoolean:function(e){return!1===e||!0===e},isFunction:function(e){return"[object Function]"===Object.prototype.toString.call(e)}}}(),dat.controllers.Controller=function(e){var t=function(e,t){this.initialValue=e[t],this.domElement=document.createElement("div"),this.object=e,this.property=t,this.__onChange=void 0,this.__onFinishChange=void 0};return dat.utils.common.extend(t.prototype,{onChange:function(e){return this.__onChange=e,this},onFinishChange:function(e){return this.__onFinishChange=e,this},setValue:function(e){return this.object[this.property]=e,this.__onChange&&this.__onChange.call(this,e),this.updateDisplay(),this},getValue:function(){return this.object[this.property]},updateDisplay:function(){return this},isModified:function(){return this.initialValue!==this.getValue()}}),t}(),dat.dom.dom=function(e){var t={};e.each({HTMLEvents:["change"],MouseEvents:["click","mousemove","mousedown","mouseup","mouseover"],KeyboardEvents:["keydown"]},function(n,r){e.each(n,function(e){t[e]=r})});var n=/(\d+(\.\d+)?)px/;function r(t){if("0"===t||e.isUndefined(t))return 0;var r=t.match(n);return e.isNull(r)?0:parseFloat(r[1])}var i={makeSelectable:function(e,t){void 0!==e&&void 0!==e.style&&(e.onselectstart=t?function(){return!1}:function(){},e.style.MozUserSelect=t?"auto":"none",e.style.KhtmlUserSelect=t?"auto":"none",e.unselectable=t?"on":"off")},makeFullscreen:function(t,n,r){e.isUndefined(n)&&(n=!0),e.isUndefined(r)&&(r=!0),t.style.position="absolute",n&&(t.style.left=0,t.style.right=0),r&&(t.style.top=0,t.style.bottom=0)},fakeEvent:function(n,r,i,o){i=i||{};var a=t[r];if(!a)throw new Error("Event type "+r+" not supported.");var s=document.createEvent(a);switch(a){case"MouseEvents":var l=i.x||i.clientX||0,c=i.y||i.clientY||0;s.initMouseEvent(r,i.bubbles||!1,i.cancelable||!0,window,i.clickCount||1,0,0,l,c,!1,!1,!1,!1,0,null);break;case"KeyboardEvents":var u=s.initKeyboardEvent||s.initKeyEvent;e.defaults(i,{cancelable:!0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,keyCode:void 0,charCode:void 0}),u(r,i.bubbles||!1,i.cancelable,window,i.ctrlKey,i.altKey,i.shiftKey,i.metaKey,i.keyCode,i.charCode);break;default:s.initEvent(r,i.bubbles||!1,i.cancelable||!0)}e.defaults(s,o),n.dispatchEvent(s)},bind:function(e,t,n,r){return r=r||!1,e.addEventListener?e.addEventListener(t,n,r):e.attachEvent&&e.attachEvent("on"+t,n),i},unbind:function(e,t,n,r){return r=r||!1,e.removeEventListener?e.removeEventListener(t,n,r):e.detachEvent&&e.detachEvent("on"+t,n),i},addClass:function(e,t){if(void 0===e.className)e.className=t;else if(e.className!==t){var n=e.className.split(/ +/);-1==n.indexOf(t)&&(n.push(t),e.className=n.join(" ").replace(/^\s+/,"").replace(/\s+$/,""))}return i},removeClass:function(e,t){if(t)if(void 0===e.className);else if(e.className===t)e.removeAttribute("class");else{var n=e.className.split(/ +/),r=n.indexOf(t);-1!=r&&(n.splice(r,1),e.className=n.join(" "))}else e.className=void 0;return i},hasClass:function(e,t){return new RegExp("(?:^|\\s+)"+t+"(?:\\s+|$)").test(e.className)||!1},getWidth:function(e){var t=getComputedStyle(e);return r(t["border-left-width"])+r(t["border-right-width"])+r(t["padding-left"])+r(t["padding-right"])+r(t.width)},getHeight:function(e){var t=getComputedStyle(e);return r(t["border-top-width"])+r(t["border-bottom-width"])+r(t["padding-top"])+r(t["padding-bottom"])+r(t.height)},getOffset:function(e){var t={left:0,top:0};if(e.offsetParent)do{t.left+=e.offsetLeft,t.top+=e.offsetTop}while(e=e.offsetParent);return t},isActive:function(e){return e===document.activeElement&&(e.type||e.href)}};return i}(dat.utils.common),dat.controllers.OptionController=function(e,t,n){var r=function e(r,i,o){e.superclass.call(this,r,i);var a=this;if(this.__select=document.createElement("select"),n.isArray(o)){var s={};n.each(o,function(e){s[e]=e}),o=s}n.each(o,function(e,t){var n=document.createElement("option");n.innerHTML=t,n.setAttribute("value",e),a.__select.appendChild(n)}),this.updateDisplay(),t.bind(this.__select,"change",function(){var e=this.options[this.selectedIndex].value;a.setValue(e)}),this.domElement.appendChild(this.__select)};return r.superclass=e,n.extend(r.prototype,e.prototype,{setValue:function(e){var t=r.superclass.prototype.setValue.call(this,e);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),t},updateDisplay:function(){return this.__select.value=this.getValue(),r.superclass.prototype.updateDisplay.call(this)}}),r}(dat.controllers.Controller,dat.dom.dom,dat.utils.common),dat.controllers.NumberController=function(e,t){var n=function e(n,i,o){e.superclass.call(this,n,i),o=o||{},this.__min=o.min,this.__max=o.max,this.__step=o.step,t.isUndefined(this.__step)?0==this.initialValue?this.__impliedStep=.1:this.__impliedStep=Math.pow(10,Math.floor(Math.log(Math.abs(this.initialValue))/Math.LN10))/10:this.__impliedStep=this.__step,this.__precision=r(this.__impliedStep)};function r(e){return(e=e.toString()).indexOf(".")>-1?e.length-e.indexOf(".")-1:0}return n.superclass=e,t.extend(n.prototype,e.prototype,{setValue:function(e){return void 0!==this.__min&&e<this.__min?e=this.__min:void 0!==this.__max&&e>this.__max&&(e=this.__max),void 0!==this.__step&&e%this.__step!=0&&(e=Math.round(e/this.__step)*this.__step),n.superclass.prototype.setValue.call(this,e)},min:function(e){return this.__min=e,this},max:function(e){return this.__max=e,this},step:function(e){return this.__step=e,this.__impliedStep=e,this.__precision=r(e),this}}),n}(dat.controllers.Controller,dat.utils.common),dat.controllers.NumberControllerBox=function(e,t,n){var r=function e(r,i,o){this.__truncationSuspended=!1,e.superclass.call(this,r,i,o);var a,s=this;function l(){var e=parseFloat(s.__input.value);n.isNaN(e)||s.setValue(e)}function c(e){var t=a-e.clientY;s.setValue(s.getValue()+t*s.__impliedStep),a=e.clientY}function u(){t.unbind(window,"mousemove",c),t.unbind(window,"mouseup",u)}this.__input=document.createElement("input"),this.__input.setAttribute("type","text"),t.bind(this.__input,"change",l),t.bind(this.__input,"blur",function(){l(),s.__onFinishChange&&s.__onFinishChange.call(s,s.getValue())}),t.bind(this.__input,"mousedown",function(e){t.bind(window,"mousemove",c),t.bind(window,"mouseup",u),a=e.clientY}),t.bind(this.__input,"keydown",function(e){13===e.keyCode&&(s.__truncationSuspended=!0,this.blur(),s.__truncationSuspended=!1)}),this.updateDisplay(),this.domElement.appendChild(this.__input)};return r.superclass=e,n.extend(r.prototype,e.prototype,{updateDisplay:function(){return this.__input.value=this.__truncationSuspended?this.getValue():function(e,t){var n=Math.pow(10,t);return Math.round(e*n)/n}(this.getValue(),this.__precision),r.superclass.prototype.updateDisplay.call(this)}}),r}(dat.controllers.NumberController,dat.dom.dom,dat.utils.common),dat.controllers.NumberControllerSlider=function(e,t,n,r,i){var o=function e(n,r,i,o,a){e.superclass.call(this,n,r,{min:i,max:o,step:a});var s=this;function l(e){e.preventDefault();var n=t.getOffset(s.__background),r=t.getWidth(s.__background);return s.setValue(function(e,t,n,r,i){return r+(e-t)/(n-t)*(i-r)}(e.clientX,n.left,n.left+r,s.__min,s.__max)),!1}function c(){t.unbind(window,"mousemove",l),t.unbind(window,"mouseup",c),s.__onFinishChange&&s.__onFinishChange.call(s,s.getValue())}this.__background=document.createElement("div"),this.__foreground=document.createElement("div"),t.bind(this.__background,"mousedown",function(e){t.bind(window,"mousemove",l),t.bind(window,"mouseup",c),l(e)}),t.addClass(this.__background,"slider"),t.addClass(this.__foreground,"slider-fg"),this.updateDisplay(),this.__background.appendChild(this.__foreground),this.domElement.appendChild(this.__background)};return o.superclass=e,o.useDefaultStyles=function(){n.inject("/**\n * dat-gui JavaScript Controller Library\n * http://code.google.com/p/dat-gui\n *\n * Copyright 2011 Data Arts Team, Google Creative Lab\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n */\n\n.slider {\n  box-shadow: inset 0 2px 4px rgba(0,0,0,0.15);\n  height: 1em;\n  border-radius: 1em;\n  background-color: #eee;\n  padding: 0 0.5em;\n  overflow: hidden;\n}\n\n.slider-fg {\n  padding: 1px 0 2px 0;\n  background-color: #aaa;\n  height: 1em;\n  margin-left: -0.5em;\n  padding-right: 0.5em;\n  border-radius: 1em 0 0 1em;\n}\n\n.slider-fg:after {\n  display: inline-block;\n  border-radius: 1em;\n  background-color: #fff;\n  border:  1px solid #aaa;\n  content: '';\n  float: right;\n  margin-right: -1em;\n  margin-top: -1px;\n  height: 0.9em;\n  width: 0.9em;\n}")},r.extend(o.prototype,e.prototype,{updateDisplay:function(){var e=(this.getValue()-this.__min)/(this.__max-this.__min);return this.__foreground.style.width=100*e+"%",o.superclass.prototype.updateDisplay.call(this)}}),o}(dat.controllers.NumberController,dat.dom.dom,dat.utils.css,dat.utils.common),dat.controllers.FunctionController=function(e,t,n){var r=function e(n,r,i){e.superclass.call(this,n,r);var o=this;this.__button=document.createElement("div"),this.__button.innerHTML=void 0===i?"Fire":i,t.bind(this.__button,"click",function(e){return e.preventDefault(),o.fire(),!1}),t.addClass(this.__button,"button"),this.domElement.appendChild(this.__button)};return r.superclass=e,n.extend(r.prototype,e.prototype,{fire:function(){this.__onChange&&this.__onChange.call(this),this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),this.getValue().call(this.object)}}),r}(dat.controllers.Controller,dat.dom.dom,dat.utils.common),dat.controllers.BooleanController=function(e,t,n){var r=function e(n,r){e.superclass.call(this,n,r);var i=this;this.__prev=this.getValue(),this.__checkbox=document.createElement("input"),this.__checkbox.setAttribute("type","checkbox"),t.bind(this.__checkbox,"change",function(){i.setValue(!i.__prev)},!1),this.domElement.appendChild(this.__checkbox),this.updateDisplay()};return r.superclass=e,n.extend(r.prototype,e.prototype,{setValue:function(e){var t=r.superclass.prototype.setValue.call(this,e);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),this.__prev=this.getValue(),t},updateDisplay:function(){return!0===this.getValue()?(this.__checkbox.setAttribute("checked","checked"),this.__checkbox.checked=!0):this.__checkbox.checked=!1,r.superclass.prototype.updateDisplay.call(this)}}),r}(dat.controllers.Controller,dat.dom.dom,dat.utils.common),dat.color.toString=function(e){return function(t){if(1==t.a||e.isUndefined(t.a)){for(var n=t.hex.toString(16);n.length<6;)n="0"+n;return"#"+n}return"rgba("+Math.round(t.r)+","+Math.round(t.g)+","+Math.round(t.b)+","+t.a+")"}}(dat.utils.common),dat.color.interpret=function(e,t){var n,r,i=[{litmus:t.isString,conversions:{THREE_CHAR_HEX:{read:function(e){var t=e.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);return null!==t&&{space:"HEX",hex:parseInt("0x"+t[1].toString()+t[1].toString()+t[2].toString()+t[2].toString()+t[3].toString()+t[3].toString())}},write:e},SIX_CHAR_HEX:{read:function(e){var t=e.match(/^#([A-F0-9]{6})$/i);return null!==t&&{space:"HEX",hex:parseInt("0x"+t[1].toString())}},write:e},CSS_RGB:{read:function(e){var t=e.match(/^rgb\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/);return null!==t&&{space:"RGB",r:parseFloat(t[1]),g:parseFloat(t[2]),b:parseFloat(t[3])}},write:e},CSS_RGBA:{read:function(e){var t=e.match(/^rgba\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\,\s*(.+)\s*\)/);return null!==t&&{space:"RGB",r:parseFloat(t[1]),g:parseFloat(t[2]),b:parseFloat(t[3]),a:parseFloat(t[4])}},write:e}}},{litmus:t.isNumber,conversions:{HEX:{read:function(e){return{space:"HEX",hex:e,conversionName:"HEX"}},write:function(e){return e.hex}}}},{litmus:t.isArray,conversions:{RGB_ARRAY:{read:function(e){return 3==e.length&&{space:"RGB",r:e[0],g:e[1],b:e[2]}},write:function(e){return[e.r,e.g,e.b]}},RGBA_ARRAY:{read:function(e){return 4==e.length&&{space:"RGB",r:e[0],g:e[1],b:e[2],a:e[3]}},write:function(e){return[e.r,e.g,e.b,e.a]}}}},{litmus:t.isObject,conversions:{RGBA_OBJ:{read:function(e){return!!(t.isNumber(e.r)&&t.isNumber(e.g)&&t.isNumber(e.b)&&t.isNumber(e.a))&&{space:"RGB",r:e.r,g:e.g,b:e.b,a:e.a}},write:function(e){return{r:e.r,g:e.g,b:e.b,a:e.a}}},RGB_OBJ:{read:function(e){return!!(t.isNumber(e.r)&&t.isNumber(e.g)&&t.isNumber(e.b))&&{space:"RGB",r:e.r,g:e.g,b:e.b}},write:function(e){return{r:e.r,g:e.g,b:e.b}}},HSVA_OBJ:{read:function(e){return!!(t.isNumber(e.h)&&t.isNumber(e.s)&&t.isNumber(e.v)&&t.isNumber(e.a))&&{space:"HSV",h:e.h,s:e.s,v:e.v,a:e.a}},write:function(e){return{h:e.h,s:e.s,v:e.v,a:e.a}}},HSV_OBJ:{read:function(e){return!!(t.isNumber(e.h)&&t.isNumber(e.s)&&t.isNumber(e.v))&&{space:"HSV",h:e.h,s:e.s,v:e.v}},write:function(e){return{h:e.h,s:e.s,v:e.v}}}}}];return function(){r=!1;var e=arguments.length>1?t.toArray(arguments):arguments[0];return t.each(i,function(i){if(i.litmus(e))return t.each(i.conversions,function(i,o){if(n=i.read(e),!1===r&&!1!==n)return r=n,n.conversionName=o,n.conversion=i,t.BREAK}),t.BREAK}),r}}(dat.color.toString,dat.utils.common),dat.GUI=dat.gui.GUI=function(e,t,n,r,i,o,a,s,l,c,u,d,h,p,f){e.inject(".dg {\n  /** Clear list styles */\n  /* Auto-place container */\n  /* Auto-placed GUI's */\n  /* Line items that don't contain folders. */\n  /** Folder names */\n  /** Hides closed items */\n  /** Controller row */\n  /** Name-half (left) */\n  /** Controller-half (right) */\n  /** Controller placement */\n  /** Shorter number boxes when slider is present. */\n  /** Ensure the entire boolean and function row shows a hand */ }\n  .dg ul {\n    list-style: none;\n    margin: 0;\n    padding: 0;\n    width: 100%;\n    clear: both; }\n  .dg.ac {\n    position: fixed;\n    top: 0;\n    left: 0;\n    right: 0;\n    height: 0;\n    z-index: 0; }\n  .dg:not(.ac) .main {\n    /** Exclude mains in ac so that we don't hide close button */\n    overflow: hidden; }\n  .dg.main {\n    -webkit-transition: opacity 0.1s linear;\n    -o-transition: opacity 0.1s linear;\n    -moz-transition: opacity 0.1s linear;\n    transition: opacity 0.1s linear; }\n    .dg.main.taller-than-window {\n      overflow-y: auto; }\n      .dg.main.taller-than-window .close-button {\n        opacity: 1;\n        /* TODO, these are style notes */\n        margin-top: -1px;\n        border-top: 1px solid #2c2c2c; }\n    .dg.main ul.closed .close-button {\n      opacity: 1 !important; }\n    .dg.main:hover .close-button,\n    .dg.main .close-button.drag {\n      opacity: 1; }\n    .dg.main .close-button {\n      /*opacity: 0;*/\n      -webkit-transition: opacity 0.1s linear;\n      -o-transition: opacity 0.1s linear;\n      -moz-transition: opacity 0.1s linear;\n      transition: opacity 0.1s linear;\n      border: 0;\n      position: absolute;\n      line-height: 19px;\n      height: 20px;\n      /* TODO, these are style notes */\n      cursor: pointer;\n      text-align: center;\n      background-color: #000; }\n      .dg.main .close-button:hover {\n        background-color: #111; }\n  .dg.a {\n    float: right;\n    margin-right: 15px;\n    overflow-x: hidden; }\n    .dg.a.has-save > ul {\n      margin-top: 27px; }\n      .dg.a.has-save > ul.closed {\n        margin-top: 0; }\n    .dg.a .save-row {\n      position: fixed;\n      top: 0;\n      z-index: 1002; }\n  .dg li {\n    -webkit-transition: height 0.1s ease-out;\n    -o-transition: height 0.1s ease-out;\n    -moz-transition: height 0.1s ease-out;\n    transition: height 0.1s ease-out; }\n  .dg li:not(.folder) {\n    cursor: auto;\n    height: 27px;\n    line-height: 27px;\n    overflow: hidden;\n    padding: 0 4px 0 5px; }\n  .dg li.folder {\n    padding: 0;\n    border-left: 4px solid rgba(0, 0, 0, 0); }\n  .dg li.title {\n    cursor: pointer;\n    margin-left: -4px; }\n  .dg .closed li:not(.title),\n  .dg .closed ul li,\n  .dg .closed ul li > * {\n    height: 0;\n    overflow: hidden;\n    border: 0; }\n  .dg .cr {\n    clear: both;\n    padding-left: 3px;\n    height: 27px; }\n  .dg .property-name {\n    cursor: default;\n    float: left;\n    clear: left;\n    width: 40%;\n    overflow: hidden;\n    text-overflow: ellipsis; }\n  .dg .c {\n    float: left;\n    width: 60%; }\n  .dg .c input[type=text] {\n    border: 0;\n    margin-top: 4px;\n    padding: 3px;\n    width: 100%;\n    float: right; }\n  .dg .has-slider input[type=text] {\n    width: 30%;\n    /*display: none;*/\n    margin-left: 0; }\n  .dg .slider {\n    float: left;\n    width: 66%;\n    margin-left: -5px;\n    margin-right: 0;\n    height: 19px;\n    margin-top: 4px; }\n  .dg .slider-fg {\n    height: 100%; }\n  .dg .c input[type=checkbox] {\n    margin-top: 9px; }\n  .dg .c select {\n    margin-top: 5px; }\n  .dg .cr.function,\n  .dg .cr.function .property-name,\n  .dg .cr.function *,\n  .dg .cr.boolean,\n  .dg .cr.boolean * {\n    cursor: pointer; }\n  .dg .selector {\n    display: none;\n    position: absolute;\n    margin-left: -9px;\n    margin-top: 23px;\n    z-index: 10; }\n  .dg .c:hover .selector,\n  .dg .selector.drag {\n    display: block; }\n  .dg li.save-row {\n    padding: 0; }\n    .dg li.save-row .button {\n      display: inline-block;\n      padding: 0px 6px; }\n  .dg.dialogue {\n    background-color: #222;\n    width: 460px;\n    padding: 15px;\n    font-size: 13px;\n    line-height: 15px; }\n\n/* TODO Separate style and structure */\n#dg-new-constructor {\n  padding: 10px;\n  color: #222;\n  font-family: Monaco, monospace;\n  font-size: 10px;\n  border: 0;\n  resize: none;\n  box-shadow: inset 1px 1px 1px #888;\n  word-wrap: break-word;\n  margin: 12px 0;\n  display: block;\n  width: 440px;\n  overflow-y: scroll;\n  height: 100px;\n  position: relative; }\n\n#dg-local-explain {\n  display: none;\n  font-size: 11px;\n  line-height: 17px;\n  border-radius: 3px;\n  background-color: #333;\n  padding: 8px;\n  margin-top: 10px; }\n  #dg-local-explain code {\n    font-size: 10px; }\n\n#dat-gui-save-locally {\n  display: none; }\n\n/** Main type */\n.dg {\n  color: #eee;\n  font: 11px 'Lucida Grande', sans-serif;\n  text-shadow: 0 -1px 0 #111;\n  /** Auto place */\n  /* Controller row, <li> */\n  /** Controllers */ }\n  .dg.main {\n    /** Scrollbar */ }\n    .dg.main::-webkit-scrollbar {\n      width: 5px;\n      background: #1a1a1a; }\n    .dg.main::-webkit-scrollbar-corner {\n      height: 0;\n      display: none; }\n    .dg.main::-webkit-scrollbar-thumb {\n      border-radius: 5px;\n      background: #676767; }\n  .dg li:not(.folder) {\n    background: #1a1a1a;\n    border-bottom: 1px solid #2c2c2c; }\n  .dg li.save-row {\n    line-height: 25px;\n    background: #dad5cb;\n    border: 0; }\n    .dg li.save-row select {\n      margin-left: 5px;\n      width: 108px; }\n    .dg li.save-row .button {\n      margin-left: 5px;\n      margin-top: 1px;\n      border-radius: 2px;\n      font-size: 9px;\n      line-height: 7px;\n      padding: 4px 4px 5px 4px;\n      background: #c5bdad;\n      color: #fff;\n      text-shadow: 0 1px 0 #b0a58f;\n      box-shadow: 0 -1px 0 #b0a58f;\n      cursor: pointer; }\n      .dg li.save-row .button.gears {\n        background: #c5bdad url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAANCAYAAAB/9ZQ7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpiYKAU/P//PwGIC/ApCABiBSAW+I8AClAcgKxQ4T9hoMAEUrxx2QSGN6+egDX+/vWT4e7N82AMYoPAx/evwWoYoSYbACX2s7KxCxzcsezDh3evFoDEBYTEEqycggWAzA9AuUSQQgeYPa9fPv6/YWm/Acx5IPb7ty/fw+QZblw67vDs8R0YHyQhgObx+yAJkBqmG5dPPDh1aPOGR/eugW0G4vlIoTIfyFcA+QekhhHJhPdQxbiAIguMBTQZrPD7108M6roWYDFQiIAAv6Aow/1bFwXgis+f2LUAynwoIaNcz8XNx3Dl7MEJUDGQpx9gtQ8YCueB+D26OECAAQDadt7e46D42QAAAABJRU5ErkJggg==) 2px 1px no-repeat;\n        height: 7px;\n        width: 8px; }\n      .dg li.save-row .button:hover {\n        background-color: #bab19e;\n        box-shadow: 0 -1px 0 #b0a58f; }\n  .dg li.folder {\n    border-bottom: 0; }\n  .dg li.title {\n    padding-left: 16px;\n    background: black url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;\n    cursor: pointer;\n    border-bottom: 1px solid rgba(255, 255, 255, 0.2); }\n  .dg .closed li.title {\n    background-image: url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlGIWqMCbWAEAOw==); }\n  .dg .cr.boolean {\n    border-left: 3px solid #806787; }\n  .dg .cr.function {\n    border-left: 3px solid #e61d5f; }\n  .dg .cr.number {\n    border-left: 3px solid #2fa1d6; }\n    .dg .cr.number input[type=text] {\n      color: #2fa1d6; }\n  .dg .cr.string {\n    border-left: 3px solid #1ed36f; }\n    .dg .cr.string input[type=text] {\n      color: #1ed36f; }\n  .dg .cr.function:hover, .dg .cr.boolean:hover {\n    background: #111; }\n  .dg .c input[type=text] {\n    background: #303030;\n    outline: none; }\n    .dg .c input[type=text]:hover {\n      background: #3c3c3c; }\n    .dg .c input[type=text]:focus {\n      background: #494949;\n      color: #fff; }\n  .dg .c .slider {\n    background: #303030;\n    cursor: ew-resize; }\n  .dg .c .slider-fg {\n    background: #2fa1d6; }\n  .dg .c .slider:hover {\n    background: #3c3c3c; }\n    .dg .c .slider:hover .slider-fg {\n      background: #44abda; }\n");var _,m,g="Default",v=function(){try{return"localStorage"in window&&null!==window.localStorage}catch(e){return!1}}(),b=!0,y=!1,w=[],x=function e(t){var n=this;this.domElement=document.createElement("div"),this.__ul=document.createElement("ul"),this.domElement.appendChild(this.__ul),p.addClass(this.domElement,"dg"),this.__folders={},this.__controllers=[],this.__rememberedObjects=[],this.__rememberedObjectIndecesToControllers=[],this.__listening=[],t=t||{},t=f.defaults(t,{autoPlace:!0,width:e.DEFAULT_WIDTH}),t=f.defaults(t,{resizable:t.autoPlace,hideable:t.autoPlace}),f.isUndefined(t.load)?t.load={preset:g}:t.preset&&(t.load.preset=t.preset),f.isUndefined(t.parent)&&t.hideable&&w.push(this),t.resizable=f.isUndefined(t.parent)&&t.resizable,t.autoPlace&&f.isUndefined(t.scrollable)&&(t.scrollable=!0);var r,i=v&&"true"===localStorage.getItem(S(this,"isLocal"));if(Object.defineProperties(this,{parent:{get:function(){return t.parent}},scrollable:{get:function(){return t.scrollable}},autoPlace:{get:function(){return t.autoPlace}},preset:{get:function(){return n.parent?n.getRoot().preset:t.load.preset},set:function(e){n.parent?n.getRoot().preset=e:t.load.preset=e,function(e){for(var t=0;t<e.__preset_select.length;t++)e.__preset_select[t].value==e.preset&&(e.__preset_select.selectedIndex=t)}(this),n.revert()}},width:{get:function(){return t.width},set:function(e){t.width=e,T(n,e)}},name:{get:function(){return t.name},set:function(e){t.name=e,a&&(a.innerHTML=t.name)}},closed:{get:function(){return t.closed},set:function(r){t.closed=r,t.closed?p.addClass(n.__ul,e.CLASS_CLOSED):p.removeClass(n.__ul,e.CLASS_CLOSED),this.onResize(),n.__closeButton&&(n.__closeButton.innerHTML=r?e.TEXT_OPEN:e.TEXT_CLOSED)}},load:{get:function(){return t.load}},useLocalStorage:{get:function(){return i},set:function(e){v&&(i=e,e?p.bind(window,"unload",r):p.unbind(window,"unload",r),localStorage.setItem(S(n,"isLocal"),e))}}}),f.isUndefined(t.parent)){if(t.closed=!1,p.addClass(this.domElement,e.CLASS_MAIN),p.makeSelectable(this.domElement,!1),v&&i){n.useLocalStorage=!0;var o=localStorage.getItem(S(this,"gui"));o&&(t.load=JSON.parse(o))}this.__closeButton=document.createElement("div"),this.__closeButton.innerHTML=e.TEXT_CLOSED,p.addClass(this.__closeButton,e.CLASS_CLOSE_BUTTON),this.domElement.appendChild(this.__closeButton),p.bind(this.__closeButton,"click",function(){n.closed=!n.closed})}else{void 0===t.closed&&(t.closed=!0);var a=document.createTextNode(t.name);p.addClass(a,"controller-name");var s=C(n,a);p.addClass(this.__ul,e.CLASS_CLOSED),p.addClass(s,"title"),p.bind(s,"click",function(e){return e.preventDefault(),n.closed=!n.closed,!1}),t.closed||(this.closed=!1)}t.autoPlace&&(f.isUndefined(t.parent)&&(b&&(m=document.createElement("div"),p.addClass(m,"dg"),p.addClass(m,e.CLASS_AUTO_PLACE_CONTAINER),document.body.appendChild(m),b=!1),m.appendChild(this.domElement),p.addClass(this.domElement,e.CLASS_AUTO_PLACE)),this.parent||T(n,t.width)),p.bind(window,"resize",function(){n.onResize()}),p.bind(this.__ul,"webkitTransitionEnd",function(){n.onResize()}),p.bind(this.__ul,"transitionend",function(){n.onResize()}),p.bind(this.__ul,"oTransitionEnd",function(){n.onResize()}),this.onResize(),t.resizable&&k(this),r=function(){v&&"true"===localStorage.getItem(S(n,"isLocal"))&&localStorage.setItem(S(n,"gui"),JSON.stringify(n.getSaveObject()))},this.saveToLocalStorageIfPossible=r;n.getRoot();t.parent||function(){var e=n.getRoot();e.width+=1,f.defer(function(){e.width-=1})}()};function E(e,t,n,c){if(void 0===t[n])throw new Error("Object "+t+' has no property "'+n+'"');var d;if(c.color)d=new u(t,n);else{var h=[t,n].concat(c.factoryArgs);d=r.apply(e,h)}c.before instanceof i&&(c.before=c.before.__li),A(e,d),p.addClass(d.domElement,"c");var _=document.createElement("span");p.addClass(_,"property-name"),_.innerHTML=d.property;var m=document.createElement("div");m.appendChild(_),m.appendChild(d.domElement);var g=C(e,m,c.before),v=d.getValue();if(p.addClass(g,x.CLASS_CONTROLLER_ROW),p.addClass(g,typeof v),"string"==typeof v){var b=v[0],y=v[v.length-1];("["===b&&"]"===y||"{"===b&&"}"===y)&&p.addClass(g,"text-box")}return function(e,t,n){if(n.__li=t,n.__gui=e,f.extend(n,{options:function(t){return arguments.length>1?(n.remove(),E(e,n.object,n.property,{before:n.__li.nextElementSibling,factoryArgs:[f.toArray(arguments)]})):f.isArray(t)||f.isObject(t)?(n.remove(),E(e,n.object,n.property,{before:n.__li.nextElementSibling,factoryArgs:[t]})):void 0},name:function(e){return n.__li.firstElementChild.firstElementChild.innerHTML=e,n},listen:function(){return n.__gui.listen(n),n},remove:function(){return n.__gui.remove(n),n}}),n instanceof l){var r=new s(n.object,n.property,{min:n.__min,max:n.__max,step:n.__step});f.each(["updateDisplay","onChange","onFinishChange"],function(e){var t=n[e],i=r[e];n[e]=r[e]=function(){var e=Array.prototype.slice.call(arguments);return t.apply(n,e),i.apply(r,e)}}),p.addClass(t,"has-slider"),n.domElement.insertBefore(r.domElement,n.domElement.firstElementChild)}else if(n instanceof s){var i=function(t){return f.isNumber(n.__min)&&f.isNumber(n.__max)?(n.remove(),E(e,n.object,n.property,{before:n.__li.nextElementSibling,factoryArgs:[n.__min,n.__max,n.__step]})):t};n.min=f.compose(i,n.min),n.max=f.compose(i,n.max)}else n instanceof o?(p.bind(t,"click",function(){p.fakeEvent(n.__checkbox,"click")}),p.bind(n.__checkbox,"click",function(e){e.stopPropagation()})):n instanceof a?(p.bind(t,"click",function(){p.fakeEvent(n.__button,"click")}),p.bind(t,"mouseover",function(){p.addClass(n.__button,"hover")}),p.bind(t,"mouseout",function(){p.removeClass(n.__button,"hover")})):n instanceof u&&(p.addClass(t,"color"),n.updateDisplay=f.compose(function(e){return t.style.borderLeftColor=n.__color.toString(),e},n.updateDisplay),n.updateDisplay());n.setValue=f.compose(function(t){return e.getRoot().__preset_select&&n.isModified()&&D(e.getRoot(),!0),t},n.setValue)}(e,g,d),e.__controllers.push(d),d}function C(e,t,n){var r=document.createElement("li");return t&&r.appendChild(t),n?e.__ul.insertBefore(r,params.before):e.__ul.appendChild(r),e.onResize(),r}function A(e,t){var n=e.getRoot(),r=n.__rememberedObjects.indexOf(t.object);if(-1!=r){var i=n.__rememberedObjectIndecesToControllers[r];if(void 0===i&&(i={},n.__rememberedObjectIndecesToControllers[r]=i),i[t.property]=t,n.load&&n.load.remembered){var o,a=n.load.remembered;if(a[e.preset])o=a[e.preset];else{if(!a[g])return;o=a[g]}if(o[r]&&void 0!==o[r][t.property]){var s=o[r][t.property];t.initialValue=s,t.setValue(s)}}}}function S(e,t){return document.location.href+"."+t}function k(e){var t;function n(n){return n.preventDefault(),t=n.clientX,p.addClass(e.__closeButton,x.CLASS_DRAG),p.bind(window,"mousemove",r),p.bind(window,"mouseup",i),!1}function r(n){return n.preventDefault(),e.width+=t-n.clientX,e.onResize(),t=n.clientX,!1}function i(){p.removeClass(e.__closeButton,x.CLASS_DRAG),p.unbind(window,"mousemove",r),p.unbind(window,"mouseup",i)}e.__resize_handle=document.createElement("div"),f.extend(e.__resize_handle.style,{width:"6px",marginLeft:"-3px",height:"200px",cursor:"ew-resize",position:"absolute"}),p.bind(e.__resize_handle,"mousedown",n),p.bind(e.__closeButton,"mousedown",n),e.domElement.insertBefore(e.__resize_handle,e.domElement.firstElementChild)}function T(e,t){e.domElement.style.width=t+"px",e.__save_row&&e.autoPlace&&(e.__save_row.style.width=t+"px"),e.__closeButton&&(e.__closeButton.style.width=t+"px")}function P(e,t){var n={};return f.each(e.__rememberedObjects,function(r,i){var o={},a=e.__rememberedObjectIndecesToControllers[i];f.each(a,function(e,n){o[n]=t?e.initialValue:e.getValue()}),n[i]=o}),n}function O(e,t,n){var r=document.createElement("option");r.innerHTML=t,r.value=t,e.__preset_select.appendChild(r),n&&(e.__preset_select.selectedIndex=e.__preset_select.length-1)}function D(e,t){var n=e.__preset_select[e.__preset_select.selectedIndex];n.innerHTML=t?n.value+"*":n.value}return x.toggleHide=function(){y=!y,f.each(w,function(e){e.domElement.style.zIndex=y?-999:999,e.domElement.style.opacity=y?0:1})},x.CLASS_AUTO_PLACE="a",x.CLASS_AUTO_PLACE_CONTAINER="ac",x.CLASS_MAIN="main",x.CLASS_CONTROLLER_ROW="cr",x.CLASS_TOO_TALL="taller-than-window",x.CLASS_CLOSED="closed",x.CLASS_CLOSE_BUTTON="close-button",x.CLASS_DRAG="drag",x.DEFAULT_WIDTH=245,x.TEXT_CLOSED="Close Controls",x.TEXT_OPEN="Open Controls",p.bind(window,"keydown",function(e){"text"===document.activeElement.type||72!==e.which&&72!=e.keyCode||x.toggleHide()},!1),f.extend(x.prototype,{add:function(e,t){return E(this,e,t,{factoryArgs:Array.prototype.slice.call(arguments,2)})},addColor:function(e,t){return E(this,e,t,{color:!0})},remove:function(e){this.__ul.removeChild(e.__li),this.__controllers.slice(this.__controllers.indexOf(e),1);var t=this;f.defer(function(){t.onResize()})},destroy:function(){this.autoPlace&&m.removeChild(this.domElement)},addFolder:function(e){if(void 0!==this.__folders[e])throw new Error('You already have a folder in this GUI by the name "'+e+'"');var t={name:e,parent:this};t.autoPlace=this.autoPlace,this.load&&this.load.folders&&this.load.folders[e]&&(t.closed=this.load.folders[e].closed,t.load=this.load.folders[e]);var n=new x(t);this.__folders[e]=n;var r=C(this,n.domElement);return r.id=e,p.addClass(r,"folder"),n},open:function(){this.closed=!1},close:function(){this.closed=!0},onResize:function(){var e=this.getRoot();if(e.scrollable){var t=p.getOffset(e.__ul).top,n=0;f.each(e.__ul.childNodes,function(t){e.autoPlace&&t===e.__save_row||(n+=p.getHeight(t))}),window.innerHeight-t-20<n?(p.addClass(e.domElement,x.CLASS_TOO_TALL),e.__ul.style.height=window.innerHeight-t-20+"px"):(p.removeClass(e.domElement,x.CLASS_TOO_TALL),e.__ul.style.height="auto")}e.__resize_handle&&f.defer(function(){e.__resize_handle.style.height=e.__ul.offsetHeight+"px"}),e.__closeButton&&(e.__closeButton.style.width=e.width+"px")},remember:function(){if(f.isUndefined(_)&&((_=new h).domElement.innerHTML='<div id="dg-save" class="dg dialogue">\n\n  Here\'s the new load parameter for your <code>GUI</code>\'s constructor:\n\n  <textarea id="dg-new-constructor"></textarea>\n\n  <div id="dg-save-locally">\n\n    <input id="dg-local-storage" type="checkbox"/> Automatically save\n    values to <code>localStorage</code> on exit.\n\n    <div id="dg-local-explain">The values saved to <code>localStorage</code> will\n      override those passed to <code>dat.GUI</code>\'s constructor. This makes it\n      easier to work incrementally, but <code>localStorage</code> is fragile,\n      and your friends may not see the same values you do.\n      \n    </div>\n    \n  </div>\n\n</div>'),this.parent)throw new Error("You can only call remember on a top level GUI.");var e=this;f.each(Array.prototype.slice.call(arguments),function(t){0==e.__rememberedObjects.length&&function(e){var t=e.__save_row=document.createElement("li");p.addClass(e.domElement,"has-save"),e.__ul.insertBefore(t,e.__ul.firstChild),p.addClass(t,"save-row");var n=document.createElement("span");n.innerHTML="&nbsp;",p.addClass(n,"button gears");var r=document.createElement("span");r.innerHTML="Save",p.addClass(r,"button"),p.addClass(r,"save");var i=document.createElement("span");i.innerHTML="New",p.addClass(i,"button"),p.addClass(i,"save-as");var o=document.createElement("span");o.innerHTML="Revert",p.addClass(o,"button"),p.addClass(o,"revert");var a=e.__preset_select=document.createElement("select");e.load&&e.load.remembered?f.each(e.load.remembered,function(t,n){O(e,n,n==e.preset)}):O(e,g,!1);if(p.bind(a,"change",function(){for(var t=0;t<e.__preset_select.length;t++)e.__preset_select[t].innerHTML=e.__preset_select[t].value;e.preset=this.value}),t.appendChild(a),t.appendChild(n),t.appendChild(r),t.appendChild(i),t.appendChild(o),v){var s=function(){c.style.display=e.useLocalStorage?"block":"none"},l=document.getElementById("dg-save-locally"),c=document.getElementById("dg-local-explain");l.style.display="block";var u=document.getElementById("dg-local-storage");"true"===localStorage.getItem(S(e,"isLocal"))&&u.setAttribute("checked","checked"),s(),p.bind(u,"change",function(){e.useLocalStorage=!e.useLocalStorage,s()})}var d=document.getElementById("dg-new-constructor");p.bind(d,"keydown",function(e){!e.metaKey||67!==e.which&&67!=e.keyCode||_.hide()}),p.bind(n,"click",function(){d.innerHTML=JSON.stringify(e.getSaveObject(),void 0,2),_.show(),d.focus(),d.select()}),p.bind(r,"click",function(){e.save()}),p.bind(i,"click",function(){var t=prompt("Enter a new preset name.");t&&e.saveAs(t)}),p.bind(o,"click",function(){e.revert()})}(e),-1==e.__rememberedObjects.indexOf(t)&&e.__rememberedObjects.push(t)}),this.autoPlace&&T(this,this.width)},getRoot:function(){for(var e=this;e.parent;)e=e.parent;return e},getSaveObject:function(){var e=this.load;return e.closed=this.closed,this.__rememberedObjects.length>0&&(e.preset=this.preset,e.remembered||(e.remembered={}),e.remembered[this.preset]=P(this)),e.folders={},f.each(this.__folders,function(t,n){e.folders[n]=t.getSaveObject()}),e},save:function(){this.load.remembered||(this.load.remembered={}),this.load.remembered[this.preset]=P(this),D(this,!1),this.saveToLocalStorageIfPossible()},saveAs:function(e){this.load.remembered||(this.load.remembered={},this.load.remembered[g]=P(this,!0)),this.load.remembered[e]=P(this),this.preset=e,O(this,e,!0),this.saveToLocalStorageIfPossible()},revert:function(e){f.each(this.__controllers,function(t){this.getRoot().load.remembered?A(e||this.getRoot(),t):t.setValue(t.initialValue)},this),f.each(this.__folders,function(e){e.revert(e)}),e||D(this.getRoot(),!1)},listen:function(e){var t=0==this.__listening.length;this.__listening.push(e),t&&function e(t){0!=t.length&&d(function(){e(t)});f.each(t,function(e){e.updateDisplay()})}(this.__listening)}}),x}(dat.utils.css,0,0,dat.controllers.factory=function(e,t,n,r,i,o,a){return function(s,l){var c=s[l];if(a.isArray(arguments[2])||a.isObject(arguments[2]))return new e(s,l,arguments[2]);if(a.isNumber(c))return a.isNumber(arguments[2])&&a.isNumber(arguments[3])?new n(s,l,arguments[2],arguments[3]):new t(s,l,{min:arguments[2],max:arguments[3]});if(a.isString(c)){var u=c[0],d=c[c.length-1];return new r("["===u&&"]"===d||"{"===u&&"}"===d,s,l)}return a.isFunction(c)?new i(s,l,""):a.isBoolean(c)?new o(s,l):void 0}}(dat.controllers.OptionController,dat.controllers.NumberControllerBox,dat.controllers.NumberControllerSlider,dat.controllers.StringController=function(e,t,n){var r=function e(n,r,i){e.superclass.call(this,r,i);var o=this;function a(){o.setValue(o.__input.value),n&&o.__onFinishChange.call(o,o.getValue())}this.__input=n?document.createElement("textarea"):document.createElement("input"),this.__input.setAttribute("type","text"),n?(this.__btn=document.createElement("button"),this.__btn.innerHTML="Update",t.bind(this.__btn,"click",a)):(t.bind(this.__input,"keyup",a),t.bind(this.__input,"change",a),t.bind(this.__input,"blur",function(){o.__onFinishChange&&o.__onFinishChange.call(o,o.getValue())}),t.bind(this.__input,"keydown",function(e){13===e.keyCode&&this.blur()})),this.updateDisplay(),this.domElement.appendChild(this.__input),n&&this.domElement.appendChild(this.__btn)};return r.superclass=e,n.extend(r.prototype,e.prototype,{updateDisplay:function(){return t.isActive(this.__input)||(this.__input.value=this.getValue()),r.superclass.prototype.updateDisplay.call(this)}}),r}(dat.controllers.Controller,dat.dom.dom,dat.utils.common),dat.controllers.FunctionController,dat.controllers.BooleanController,dat.utils.common),dat.controllers.Controller,dat.controllers.BooleanController,dat.controllers.FunctionController,dat.controllers.NumberControllerBox,dat.controllers.NumberControllerSlider,dat.controllers.OptionController,dat.controllers.ColorController=function(e,t,n,r,i){var o=function e(o,a){e.superclass.call(this,o,a),this.__color=new n(this.getValue()),this.__temp=new n(0);var l=this;this.domElement=document.createElement("div"),t.makeSelectable(this.domElement,!1),this.__selector=document.createElement("div"),this.__selector.className="selector",this.__saturation_field=document.createElement("div"),this.__saturation_field.className="saturation-field",this.__field_knob=document.createElement("div"),this.__field_knob.className="field-knob",this.__field_knob_border="2px solid ",this.__hue_knob=document.createElement("div"),this.__hue_knob.className="hue-knob",this.__hue_field=document.createElement("div"),this.__hue_field.className="hue-field",this.__input=document.createElement("input"),this.__input.type="text",this.__input_textShadow="0 1px 1px ",t.bind(this.__input,"keydown",function(e){13===e.keyCode&&h.call(this)}),t.bind(this.__input,"blur",h),t.bind(this.__selector,"mousedown",function(e){t.addClass(this,"drag").bind(window,"mouseup",function(e){t.removeClass(l.__selector,"drag")})});var c=document.createElement("div");function u(e){f(e),t.bind(window,"mousemove",f),t.bind(window,"mouseup",d)}function d(){t.unbind(window,"mousemove",f),t.unbind(window,"mouseup",d)}function h(){var e=r(this.value);!1!==e?(l.__color.__state=e,l.setValue(l.__color.toOriginal())):this.value=l.__color.toString()}function p(){t.unbind(window,"mousemove",_),t.unbind(window,"mouseup",p)}function f(e){e.preventDefault();var n=t.getWidth(l.__saturation_field),r=t.getOffset(l.__saturation_field),i=(e.clientX-r.left+document.body.scrollLeft)/n,o=1-(e.clientY-r.top+document.body.scrollTop)/n;return o>1?o=1:o<0&&(o=0),i>1?i=1:i<0&&(i=0),l.__color.v=o,l.__color.s=i,l.setValue(l.__color.toOriginal()),!1}function _(e){e.preventDefault();var n=t.getHeight(l.__hue_field),r=t.getOffset(l.__hue_field),i=1-(e.clientY-r.top+document.body.scrollTop)/n;return i>1?i=1:i<0&&(i=0),l.__color.h=360*i,l.setValue(l.__color.toOriginal()),!1}i.extend(this.__selector.style,{width:"122px",height:"102px",padding:"3px",backgroundColor:"#222",boxShadow:"0px 1px 3px rgba(0,0,0,0.3)"}),i.extend(this.__field_knob.style,{position:"absolute",width:"12px",height:"12px",border:this.__field_knob_border+(this.__color.v<.5?"#fff":"#000"),boxShadow:"0px 1px 3px rgba(0,0,0,0.5)",borderRadius:"12px",zIndex:1}),i.extend(this.__hue_knob.style,{position:"absolute",width:"15px",height:"2px",borderRight:"4px solid #fff",zIndex:1}),i.extend(this.__saturation_field.style,{width:"100px",height:"100px",border:"1px solid #555",marginRight:"3px",display:"inline-block",cursor:"pointer"}),i.extend(c.style,{width:"100%",height:"100%",background:"none"}),s(c,"top","rgba(0,0,0,0)","#000"),i.extend(this.__hue_field.style,{width:"15px",height:"100px",display:"inline-block",border:"1px solid #555",cursor:"ns-resize"}),function(e){e.style.background="",e.style.cssText+="background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);",e.style.cssText+="background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",e.style.cssText+="background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",e.style.cssText+="background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",e.style.cssText+="background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);"}(this.__hue_field),i.extend(this.__input.style,{outline:"none",textAlign:"center",color:"#fff",border:0,fontWeight:"bold",textShadow:this.__input_textShadow+"rgba(0,0,0,0.7)"}),t.bind(this.__saturation_field,"mousedown",u),t.bind(this.__field_knob,"mousedown",u),t.bind(this.__hue_field,"mousedown",function(e){_(e),t.bind(window,"mousemove",_),t.bind(window,"mouseup",p)}),this.__saturation_field.appendChild(c),this.__selector.appendChild(this.__field_knob),this.__selector.appendChild(this.__saturation_field),this.__selector.appendChild(this.__hue_field),this.__hue_field.appendChild(this.__hue_knob),this.domElement.appendChild(this.__input),this.domElement.appendChild(this.__selector),this.updateDisplay()};o.superclass=e,i.extend(o.prototype,e.prototype,{updateDisplay:function(){var e=r(this.getValue());if(!1!==e){var t=!1;i.each(n.COMPONENTS,function(n){if(!i.isUndefined(e[n])&&!i.isUndefined(this.__color.__state[n])&&e[n]!==this.__color.__state[n])return t=!0,{}},this),t&&i.extend(this.__color.__state,e)}i.extend(this.__temp.__state,this.__color.__state),this.__temp.a=1;var o=this.__color.v<.5||this.__color.s>.5?255:0,a=255-o;i.extend(this.__field_knob.style,{marginLeft:100*this.__color.s-7+"px",marginTop:100*(1-this.__color.v)-7+"px",backgroundColor:this.__temp.toString(),border:this.__field_knob_border+"rgb("+o+","+o+","+o+")"}),this.__hue_knob.style.marginTop=100*(1-this.__color.h/360)+"px",this.__temp.s=1,this.__temp.v=1,s(this.__saturation_field,"left","#fff",this.__temp.toString()),i.extend(this.__input.style,{backgroundColor:this.__input.value=this.__color.toString(),color:"rgb("+o+","+o+","+o+")",textShadow:this.__input_textShadow+"rgba("+a+","+a+","+a+",.7)"})}});var a=["-moz-","-o-","-webkit-","-ms-",""];function s(e,t,n,r){e.style.background="",i.each(a,function(i){e.style.cssText+="background: "+i+"linear-gradient("+t+", "+n+" 0%, "+r+" 100%); "})}return o}(dat.controllers.Controller,dat.dom.dom,dat.color.Color=function(e,t,n,r){var i=function(){if(this.__state=e.apply(this,arguments),!1===this.__state)throw"Failed to interpret color arguments";this.__state.a=this.__state.a||1};function o(e,t,n){Object.defineProperty(e,t,{get:function(){return"RGB"===this.__state.space?this.__state[t]:(s(this,t,n),this.__state[t])},set:function(e){"RGB"!==this.__state.space&&(s(this,t,n),this.__state.space="RGB"),this.__state[t]=e}})}function a(e,t){Object.defineProperty(e,t,{get:function(){return"HSV"===this.__state.space?this.__state[t]:(l(this),this.__state[t])},set:function(e){"HSV"!==this.__state.space&&(l(this),this.__state.space="HSV"),this.__state[t]=e}})}function s(e,n,i){if("HEX"===e.__state.space)e.__state[n]=t.component_from_hex(e.__state.hex,i);else{if("HSV"!==e.__state.space)throw"Corrupted color state";r.extend(e.__state,t.hsv_to_rgb(e.__state.h,e.__state.s,e.__state.v))}}function l(e){var n=t.rgb_to_hsv(e.r,e.g,e.b);r.extend(e.__state,{s:n.s,v:n.v}),r.isNaN(n.h)?r.isUndefined(e.__state.h)&&(e.__state.h=0):e.__state.h=n.h}return i.COMPONENTS=["r","g","b","h","s","v","hex","a"],r.extend(i.prototype,{toString:function(){return n(this)},toOriginal:function(){return this.__state.conversion.write(this)}}),o(i.prototype,"r",2),o(i.prototype,"g",1),o(i.prototype,"b",0),a(i.prototype,"h"),a(i.prototype,"s"),a(i.prototype,"v"),Object.defineProperty(i.prototype,"a",{get:function(){return this.__state.a},set:function(e){this.__state.a=e}}),Object.defineProperty(i.prototype,"hex",{get:function(){return"HEX"!==!this.__state.space&&(this.__state.hex=t.rgb_to_hex(this.r,this.g,this.b)),this.__state.hex},set:function(e){this.__state.space="HEX",this.__state.hex=e}}),i}(dat.color.interpret,dat.color.math=function(){var e;return{hsv_to_rgb:function(e,t,n){var r=Math.floor(e/60)%6,i=e/60-Math.floor(e/60),o=n*(1-t),a=n*(1-i*t),s=n*(1-(1-i)*t),l=[[n,s,o],[a,n,o],[o,n,s],[o,a,n],[s,o,n],[n,o,a]][r];return{r:255*l[0],g:255*l[1],b:255*l[2]}},rgb_to_hsv:function(e,t,n){var r,i=Math.min(e,t,n),o=Math.max(e,t,n),a=o-i;return 0==o?{h:NaN,s:0,v:0}:(r=e==o?(t-n)/a:t==o?2+(n-e)/a:4+(e-t)/a,(r/=6)<0&&(r+=1),{h:360*r,s:a/o,v:o/255})},rgb_to_hex:function(e,t,n){var r=this.hex_with_component(0,2,e);return r=this.hex_with_component(r,1,t),r=this.hex_with_component(r,0,n)},component_from_hex:function(e,t){return e>>8*t&255},hex_with_component:function(t,n,r){return r<<(e=8*n)|t&~(255<<e)}}}(),dat.color.toString,dat.utils.common),dat.color.interpret,dat.utils.common),dat.utils.requestAnimationFrame=window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e,t){window.setTimeout(e,1e3/60)},dat.dom.CenteredDiv=function(e,t){var n=function(){this.backgroundElement=document.createElement("div"),t.extend(this.backgroundElement.style,{backgroundColor:"rgba(0,0,0,0.8)",top:0,left:0,display:"none",zIndex:"1000",opacity:0,WebkitTransition:"opacity 0.2s linear"}),e.makeFullscreen(this.backgroundElement),this.backgroundElement.style.position="fixed",this.domElement=document.createElement("div"),t.extend(this.domElement.style,{position:"fixed",display:"none",zIndex:"1001",opacity:0,WebkitTransition:"-webkit-transform 0.2s ease-out, opacity 0.2s linear"}),document.body.appendChild(this.backgroundElement),document.body.appendChild(this.domElement);var n=this;e.bind(this.backgroundElement,"click",function(){n.hide()})};return n.prototype.show=function(){var e=this;this.backgroundElement.style.display="block",this.domElement.style.display="block",this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)",this.layout(),t.defer(function(){e.backgroundElement.style.opacity=1,e.domElement.style.opacity=1,e.domElement.style.webkitTransform="scale(1)"})},n.prototype.hide=function(){var t=this,n=function n(){t.domElement.style.display="none",t.backgroundElement.style.display="none",e.unbind(t.domElement,"webkitTransitionEnd",n),e.unbind(t.domElement,"transitionend",n),e.unbind(t.domElement,"oTransitionEnd",n)};e.bind(this.domElement,"webkitTransitionEnd",n),e.bind(this.domElement,"transitionend",n),e.bind(this.domElement,"oTransitionEnd",n),this.backgroundElement.style.opacity=0,this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)"},n.prototype.layout=function(){this.domElement.style.left=window.innerWidth/2-e.getWidth(this.domElement)/2+"px",this.domElement.style.top=window.innerHeight/2-e.getHeight(this.domElement)/2+"px"},n}(dat.dom.dom,dat.utils.common),dat.dom.dom,dat.utils.common)},function(e,t,n){function r(e){if(e)return function(e){for(var t in r.prototype)e[t]=r.prototype[t];return e}(e)}e.exports=r,r.prototype.on=r.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},r.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,r=this._callbacks["$"+e];if(!r)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var i=0;i<r.length;i++)if((n=r[i])===t||n.fn===t){r.splice(i,1);break}return this},r.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),n=this._callbacks["$"+e];if(n)for(var r=0,i=(n=n.slice(0)).length;r<i;++r)n[r].apply(this,t);return this},r.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},r.prototype.hasListeners=function(e){return!!this.listeners(e).length}},function(e,t,n){"use strict";var r=n(13);function i(e){if(e)return function(e){for(var t in i.prototype)e[t]=i.prototype[t];return e}(e)}e.exports=i,i.prototype.clearTimeout=function(){return clearTimeout(this._timer),clearTimeout(this._responseTimeoutTimer),delete this._timer,delete this._responseTimeoutTimer,this},i.prototype.parse=function(e){return this._parser=e,this},i.prototype.responseType=function(e){return this._responseType=e,this},i.prototype.serialize=function(e){return this._serializer=e,this},i.prototype.timeout=function(e){if(!e||"object"!=typeof e)return this._timeout=e,this._responseTimeout=0,this;for(var t in e)switch(t){case"deadline":this._timeout=e.deadline;break;case"response":this._responseTimeout=e.response;break;default:console.warn("Unknown timeout option",t)}return this},i.prototype.retry=function(e,t){return 0!==arguments.length&&!0!==e||(e=1),e<=0&&(e=0),this._maxRetries=e,this._retries=0,this._retryCallback=t,this};var o=["ECONNRESET","ETIMEDOUT","EADDRINFO","ESOCKETTIMEDOUT"];i.prototype._shouldRetry=function(e,t){if(!this._maxRetries||this._retries++>=this._maxRetries)return!1;if(this._retryCallback)try{var n=this._retryCallback(e,t);if(!0===n)return!0;if(!1===n)return!1}catch(e){console.error(e)}if(t&&t.status&&t.status>=500&&501!=t.status)return!0;if(e){if(e.code&&~o.indexOf(e.code))return!0;if(e.timeout&&"ECONNABORTED"==e.code)return!0;if(e.crossDomain)return!0}return!1},i.prototype._retry=function(){return this.clearTimeout(),this.req&&(this.req=null,this.req=this.request()),this._aborted=!1,this.timedout=!1,this._end()},i.prototype.then=function(e,t){if(!this._fullfilledPromise){var n=this;this._endCalled&&console.warn("Warning: superagent request was sent twice, because both .end() and .then() were called. Never call .end() if you use promises"),this._fullfilledPromise=new Promise(function(e,t){n.end(function(n,r){n?t(n):e(r)})})}return this._fullfilledPromise.then(e,t)},i.prototype.catch=function(e){return this.then(void 0,e)},i.prototype.use=function(e){return e(this),this},i.prototype.ok=function(e){if("function"!=typeof e)throw Error("Callback required");return this._okCallback=e,this},i.prototype._isResponseOK=function(e){return!!e&&(this._okCallback?this._okCallback(e):e.status>=200&&e.status<300)},i.prototype.get=function(e){return this._header[e.toLowerCase()]},i.prototype.getHeader=i.prototype.get,i.prototype.set=function(e,t){if(r(e)){for(var n in e)this.set(n,e[n]);return this}return this._header[e.toLowerCase()]=t,this.header[e]=t,this},i.prototype.unset=function(e){return delete this._header[e.toLowerCase()],delete this.header[e],this},i.prototype.field=function(e,t){if(null===e||void 0===e)throw new Error(".field(name, val) name can not be empty");if(this._data&&console.error(".field() can't be used if .send() is used. Please use only .send() or only .field() & .attach()"),r(e)){for(var n in e)this.field(n,e[n]);return this}if(Array.isArray(t)){for(var i in t)this.field(e,t[i]);return this}if(null===t||void 0===t)throw new Error(".field(name, val) val can not be empty");return"boolean"==typeof t&&(t=""+t),this._getFormData().append(e,t),this},i.prototype.abort=function(){return this._aborted?this:(this._aborted=!0,this.xhr&&this.xhr.abort(),this.req&&this.req.abort(),this.clearTimeout(),this.emit("abort"),this)},i.prototype._auth=function(e,t,n,r){switch(n.type){case"basic":this.set("Authorization","Basic "+r(e+":"+t));break;case"auto":this.username=e,this.password=t;break;case"bearer":this.set("Authorization","Bearer "+e)}return this},i.prototype.withCredentials=function(e){return void 0==e&&(e=!0),this._withCredentials=e,this},i.prototype.redirects=function(e){return this._maxRedirects=e,this},i.prototype.maxResponseSize=function(e){if("number"!=typeof e)throw TypeError("Invalid argument");return this._maxResponseSize=e,this},i.prototype.toJSON=function(){return{method:this.method,url:this.url,data:this._data,headers:this._header}},i.prototype.send=function(e){var t=r(e),n=this._header["content-type"];if(this._formData&&console.error(".send() can't be used if .attach() or .field() is used. Please use only .send() or only .field() & .attach()"),t&&!this._data)Array.isArray(e)?this._data=[]:this._isHost(e)||(this._data={});else if(e&&this._data&&this._isHost(this._data))throw Error("Can't merge these send calls");if(t&&r(this._data))for(var i in e)this._data[i]=e[i];else"string"==typeof e?(n||this.type("form"),n=this._header["content-type"],this._data="application/x-www-form-urlencoded"==n?this._data?this._data+"&"+e:e:(this._data||"")+e):this._data=e;return!t||this._isHost(e)?this:(n||this.type("json"),this)},i.prototype.sortQuery=function(e){return this._sort=void 0===e||e,this},i.prototype._finalizeQueryString=function(){var e=this._query.join("&");if(e&&(this.url+=(this.url.indexOf("?")>=0?"&":"?")+e),this._query.length=0,this._sort){var t=this.url.indexOf("?");if(t>=0){var n=this.url.substring(t+1).split("&");"function"==typeof this._sort?n.sort(this._sort):n.sort(),this.url=this.url.substring(0,t)+"?"+n.join("&")}}},i.prototype._appendQueryString=function(){console.trace("Unsupported")},i.prototype._timeoutError=function(e,t,n){if(!this._aborted){var r=new Error(e+t+"ms exceeded");r.timeout=t,r.code="ECONNABORTED",r.errno=n,this.timedout=!0,this.abort(),this.callback(r)}},i.prototype._setTimeouts=function(){var e=this;this._timeout&&!this._timer&&(this._timer=setTimeout(function(){e._timeoutError("Timeout of ",e._timeout,"ETIME")},this._timeout)),this._responseTimeout&&!this._responseTimeoutTimer&&(this._responseTimeoutTimer=setTimeout(function(){e._timeoutError("Response timeout of ",e._responseTimeout,"ETIMEDOUT")},this._responseTimeout))}},function(e,t,n){"use strict";var r=n(23);function i(e){if(e)return function(e){for(var t in i.prototype)e[t]=i.prototype[t];return e}(e)}e.exports=i,i.prototype.get=function(e){return this.header[e.toLowerCase()]},i.prototype._setHeaderProperties=function(e){var t=e["content-type"]||"";this.type=r.type(t);var n=r.params(t);for(var i in n)this[i]=n[i];this.links={};try{e.link&&(this.links=r.parseLinks(e.link))}catch(e){}},i.prototype._setStatusProperties=function(e){var t=e/100|0;this.status=this.statusCode=e,this.statusType=t,this.info=1==t,this.ok=2==t,this.redirect=3==t,this.clientError=4==t,this.serverError=5==t,this.error=(4==t||5==t)&&this.toError(),this.created=201==e,this.accepted=202==e,this.noContent=204==e,this.badRequest=400==e,this.unauthorized=401==e,this.notAcceptable=406==e,this.forbidden=403==e,this.notFound=404==e,this.unprocessableEntity=422==e}},function(e,t,n){"use strict";t.type=function(e){return e.split(/ *; */).shift()},t.params=function(e){return e.split(/ *; */).reduce(function(e,t){var n=t.split(/ *= */),r=n.shift(),i=n.shift();return r&&i&&(e[r]=i),e},{})},t.parseLinks=function(e){return e.split(/ *, */).reduce(function(e,t){var n=t.split(/ *; */),r=n[0].slice(1,-1);return e[n[1].split(/ *= */)[1].slice(1,-1)]=r,e},{})},t.cleanHeader=function(e,t){return delete e["content-type"],delete e["content-length"],delete e["transfer-encoding"],delete e.host,t&&(delete e.authorization,delete e.cookie),e}},function(e,t){function n(){this._defaults=[]}["use","on","once","set","query","type","accept","auth","withCredentials","sortQuery","retry","ok","redirects","timeout","buffer","serialize","parse","ca","key","pfx","cert"].forEach(function(e){n.prototype[e]=function(){return this._defaults.push({fn:e,arguments:arguments}),this}}),n.prototype._setDefaults=function(e){this._defaults.forEach(function(t){e[t.fn].apply(e,t.arguments)})},e.exports=n},function(e,t){for(var n=/iP(ad|hone|od).*OS 6/.test(window.navigator.userAgent),r=["webkit","moz"],i=0;!window.requestAnimationFrame&&i<r.length;i++)window.requestAnimationFrame=window[r[i]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[r[i]+"CancelAnimationFrame"]||window[r[i]+"CancelRequestAnimationFrame"];window.requestAnimationFrame&&window.cancelAnimationFrame&&!n||(console.log("PolyFill -> FrameRate"),window.requestAnimationFrame=function(e){return setTimeout(e,17)},window.cancelAnimationFrame=clearTimeout)},function(e,t,n){"use strict";n.r(t);n(19);var r=n(11),i=n.n(r),o=n(2),a=n(16),s=function(){var e=window.location,t=e.origin,n=e.pathname;return c(t,"1-build",n)},l=function(e){var t=/(\d+)x(\d+)/;if(t.test(e)){var n=t.exec(e);return{width:n[1],height:n[2]}}return null},c=function(){for(var e="",t=/\/+$/g,n=/^\/+|\/+$/g,r=0;r<arguments.length;r++){var i=arguments[r];e+=(0===r?i.replace(t,""):i.replace(n,""))+"/"}return e=e.replace(t,"")},u=n(3),d=(n(5),/([a-zA-Z0-9_.-]*)\.(png|jpg|jpeg)/),h=function(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(location.search);return null===t?null:decodeURIComponent(t[1].replace(/\+/g," "))}("size");function p(e){if(0!==e.emitterDataFiles.length){var t=c(s(),h),n=e.imagePaths.filter(function(e){return d.test(e)});n.forEach(function(e){var t=c("/images",e);o.b.addToLoad(t)}),o.b.load(function(){var r=n.map(function(e){return d.exec(e)[1]});!function(e){var t=e.content,n=e.adPath,r=e.loadedImageNames,i=l(n);Object(u.b)("adPath",n),Object(u.b)("adWidth",i.width),Object(u.b)("adHeight",i.height),Object(u.b)("imagePaths",t.images),Object(u.b)("loadedImageNames",r),Object(u.b)("emitterDataFiles",t.emitterDataFiles)}({content:e,adPath:t,loadedImageNames:r}),window.Interface=new a.a})}else{document.querySelector("#data-selector").classList.add("show-warning","show")}}i.a.get("/ad-es6-particles/api/?action=getInfo&size="+h).end(function(e,t){if(e)alert("Erro with API. Unable to proceed");else try{var n=JSON.parse(t.text),r=JSON.parse(n.stdout);r.emitterDataFiles=r.emitterDataFiles.map(function(e){return{name:e.name,content:function(e){var t=e.replace(/\r?\n|\r|\s/g,""),n=/\{(.*)\}/.exec(t);return n?n[0]:""}(e.content)}}),p(r)}catch(e){alert(e)}})}]);
//# sourceMappingURL=bundle.js.map